"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["8934"],{85166:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>u,default:()=>f,toc:()=>p,metadata:()=>r,assets:()=>j,contentTitle:()=>x});var r=JSON.parse('{"id":"configuration/sources/deezer","title":"Deezer","description":"This Source uses unofficial methods to access Deezer data that are likely in violation of Deezer\'s TOS. Deezer may change or remove these methods at any time, breaking functionality. Use this Source at your own risk.","source":"@site/docs/configuration/sources/deezer.mdx","sourceDirName":"configuration/sources","slug":"/configuration/sources/deezer","permalink":"/multi-scrobbler/configuration/sources/deezer","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/configuration/sources/deezer.mdx","tags":[],"version":"current","frontMatter":{"title":"Deezer","toc_min_heading_level":2,"toc_max_heading_level":5},"sidebar":"tutorialSidebar","previous":{"title":"Azuracast","permalink":"/multi-scrobbler/configuration/sources/azuracast"},"next":{"title":"Google Cast (Chromecast)","permalink":"/multi-scrobbler/configuration/sources/google-cast"}}'),s=i(85893),t=i(50065),l=i(703),o=i(73752),c=i(75752),a=i.n(c);let d='[\n  {\n    "name": "DeezerARL",\n    "enable": true,\n    "clients": [],\n    "data": {\n      "arl": "UOsRPjT3U5Dhaaup3xQ30DWFoSgqugdSYzL3QE743waaVy2eur2ckyJcZ4RV123Q3PsbKXkLwA6ahc9XmEfev6BtfSP8LujE3JswWRQogZCDUOwVzWO5sAig",\n    }\n  }\n]\n',h='[\n  {\n    "name": "DeezerOfficalDeprecated",\n    "enable": true,\n    "clients": [],\n    "data": {\n      "clientId": "a89cba1569901a0671d5a9875fed4be1",\n      "clientSecret": "ec42e09d5ae0ee0f0816ca151008412a",\n      "redirectUri": "http://localhost:9078/deezer/callback",\n      "interval": 60\n    }\n  }\n]\n',u={title:"Deezer",toc_min_heading_level:2,toc_max_heading_level:5},x=void 0,j={},p=[{value:"Retrieve ARL",id:"retrieve-arl",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Duplicate detection",id:"duplicate-detection",level:3},{value:"Family account",id:"family-account",level:3},{value:"Configuration",id:"configuration-1",level:6}];function m(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h6:"h6",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components},{AIOExample:i,Details:r,SchemaLink:c}=n;return i||g("AIOExample",!0),r||g("Details",!0),c||g("SchemaLink",!0),(0,s.jsxs)(l.default,{groupId:"deezerSource",queryString:!0,children:[(0,s.jsxs)(o.default,{value:"arl",label:"Unofficial ARL",children:[(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"This Source uses unofficial methods to access Deezer data that are likely in violation of Deezer's TOS. Deezer may change or remove these methods at any time, breaking functionality. Use this Source at your own risk."})}),(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["This Source will work only if you have a ",(0,s.jsx)(n.strong,{children:"Premium"})," Deezer account."]})}),(0,s.jsx)(n.h3,{id:"retrieve-arl",children:"Retrieve ARL"}),(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"arl"})," is a browser cookie that Deezer uses to store your login information. Multi-scrobbler uses the ",(0,s.jsx)(n.code,{children:"arl"})," value to make authorized requests to Deezer's API where it can retrieve listening history."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"After logging into Deezer"}),", use one of the methods below to retrieve the ",(0,s.jsx)(n.code,{children:"arl"})," cookie value:"]}),(0,s.jsxs)(l.default,{groupId:"arlRetrival",children:[(0,s.jsx)(o.default,{value:"chrome",label:"Chrome",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"On deezer.com, press F12 to open the Developer Tools window."}),"\n",(0,s.jsx)(n.li,{children:"Go to the Applications tab. Press the '>>' More tabs icon if it's hidden."}),"\n",(0,s.jsxs)(n.li,{children:["Under the Cookies Filter, click deezer.com, then the text bar name ",(0,s.jsx)(n.code,{children:"arl"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Copy all the contents shown in the ",(0,s.jsx)(n.strong,{children:"Cookie Value"})," pane."]}),"\n"]})}),(0,s.jsx)(o.default,{value:"firefox",label:"Firefox",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"On deezer.com, hit Ctrl+Shift+I to open Developer Tools"}),"\n",(0,s.jsx)(n.li,{children:"Go to the Storage Tab, then expand Cookies in the sidebar and select deezer.com"}),"\n",(0,s.jsxs)(n.li,{children:["Find the row with ",(0,s.jsx)(n.code,{children:"arl"})," as the name, then double click the Value column and right click -> copy the value"]}),"\n"]})})]}),(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),(0,s.jsxs)(l.default,{groupId:"configType",queryString:!0,children:[(0,s.jsx)(o.default,{value:"env",label:"ENV",children:(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Environmental Variable"}),(0,s.jsx)(n.th,{children:"Required?"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"DEEZER_ARL"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"The ARL cookie value retrieved from your browser"})]})})]})}),(0,s.jsxs)(o.default,{value:"file",label:"File",children:[(0,s.jsx)(a(),{title:"CONFIG_DIR/deezer.json",language:"json5",children:d}),(0,s.jsxs)(n.p,{children:["or ",(0,s.jsx)(c,{lower:!0,objectName:"DeezerSourceConfig"})]})]}),(0,s.jsxs)(o.default,{value:"aio",label:"AIO",children:[(0,s.jsx)(i,{data:d,name:"deezer"}),(0,s.jsxs)(n.p,{children:["or ",(0,s.jsx)(c,{lower:!0,objectName:"DeezerSourceConfig"})]})]})]}),(0,s.jsx)(n.h3,{id:"duplicate-detection",children:"Duplicate detection"}),(0,s.jsxs)(n.p,{children:["Third party integrations with Deezer (Sonos) may cause Deezer to ",(0,s.jsx)(n.a,{href:"https://github.com/FoxxMD/multi-scrobbler/pull/296#issuecomment-2922374738",children:"report the same track many times in listening history."})," If you experience this issue modify your Deezer Source config (file-based only) to include the option ",(0,s.jsx)(n.code,{children:'"fuzzyDiscoveryIgnore": "aggressive"'})]}),(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"deezer.json example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="deezer.json"',children:'[\n    {\n        "name": "MyDeezer",\n        "data": {\n            "arl": "UOsRPjT3U5Dhaaup3x...",\n        },\n        "options": {\n            "fuzzyDiscoveryIgnore": "aggressive"\n        }\n    }\n]\n'})})]}),(0,s.jsxs)(n.p,{children:["This option comes with some trade-offs: MS will aggressively detect repeated tracks within a window of time that should eliminate all duplicates. However, this will also prevent ",(0,s.jsx)(n.em,{children:"intentionally"})," repeated tracks from being scrobbled. See ",(0,s.jsx)(n.a,{href:"https://github.com/FoxxMD/multi-scrobbler/pull/296#issuecomment-2970417070",children:"this thread"})," for more information on how this works."]}),(0,s.jsx)(n.h3,{id:"family-account",children:"Family account"}),(0,s.jsxs)(n.p,{children:["Multi-scrobbler can monitor listening history for accounts linked to a ",(0,s.jsx)(n.a,{href:"https://www.deezer.com/en/offers/family",children:"Deezer Family Account"}),"."]}),(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Instructions"}),(0,s.jsxs)(n.p,{children:["Start multi-scrobbler using the ",(0,s.jsx)(n.a,{href:"#retrieve-arl",children:"ARL"})," for the ",(0,s.jsx)(n.strong,{children:"main account"}),"."]}),(0,s.jsxs)(n.p,{children:["In the logs look for ",(0,s.jsx)(n.strong,{children:"Linked Accounts"})," associated with the Deezer Source. It will look something like this:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"VERBOSE: [App] [Sources] [Deezer - MyDeezer] Linked Accounts:\nName: Joe | ID: 166276334 | Private?: Yes\nName: Mary | ID: 48475231 | Private?: Yes\nName: FoxxMD | ID: 896225281 | Private?: No\nName: Cool Guy | ID: 128522478 | Private?: Yes\n"})}),(0,s.jsxs)(n.p,{children:["The Account ",(0,s.jsx)(n.strong,{children:"ID"})," you want to monitor should be set:"]}),(0,s.jsxs)(l.default,{groupId:"configType",queryString:!0,children:[(0,s.jsxs)(o.default,{value:"env",label:"ENV",children:[(0,s.jsxs)(n.p,{children:["Set in your docker compose ",(0,s.jsx)(n.code,{children:"environment"})," section:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"- DEEZER_ACCOUNT_ID=896225281\n"})})]}),(0,s.jsxs)(o.default,{value:"file",label:"File or AIO",children:[(0,s.jsxs)(n.p,{children:["Add an ",(0,s.jsx)(n.code,{children:"accountId"})," property to the ",(0,s.jsx)(n.code,{children:"data"})," section"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "name": "DeezerARL",\n        "enable": true,\n        "clients": [],\n        "data": {\n        "arl": "UOsRPjT3U5Dhaaup3xQ30D...",\n        "accountId": "896225281"\n        }\n    }\n]\n'})})]})]}),(0,s.jsx)(n.p,{children:"Restart multi-scrobbler to start monitoring that account."}),(0,s.jsxs)(n.admonition,{title:"Restrictions",type:"warning",children:[(0,s.jsx)(n.p,{children:"Deezer may not return the correct listening history under these circumstances:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ARL used is ",(0,s.jsx)(n.strong,{children:"not"})," for the main account","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If you can get an ARL specifically for the linked account (login as the linked account), use that ",(0,s.jsx)(n.strong,{children:"instead"})," of family ",(0,s.jsx)(n.code,{children:"accountId"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"The ARL account is private"}),"\n",(0,s.jsxs)(n.li,{children:["The linked account to be monitored ( using ",(0,s.jsx)(n.code,{children:"accountId"}),") is private"]}),"\n"]})]})]})]}),(0,s.jsxs)(o.default,{value:"official",label:"Official API",children:[(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"This Source is DEPRECATED because Deezer has dropped official API support."})," This Source will ",(0,s.jsx)(n.strong,{children:"not"})," be removed but no further support or fixes will be given. ",(0,s.jsx)(n.a,{href:"https://github.com/FoxxMD/multi-scrobbler/issues/175#issuecomment-2296776625",children:"See this issue for more discussion."})]}),(0,s.jsx)(n.p,{children:"Users cannot create new applications on Deezer Developers and there is no guarantee existing applications will continue to work."}),(0,s.jsx)(n.p,{children:"As a workaround consider:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Using the alternative ",(0,s.jsx)(n.a,{href:"./?deezerSource=arl",children:"Deezer Source that uses unofficial, internal API via ARL"})]}),"\n",(0,s.jsxs)(n.li,{children:["Connect Deezer with Last.fm and then use ",(0,s.jsx)(n.a,{href:"/configuration/sources/lastfm-source",children:"Last.fm as a Source"})]}),"\n"]})]}),(0,s.jsxs)(n.p,{children:["Create a new application at ",(0,s.jsx)(n.a,{href:"https://developers.deezer.com/myapps",children:"Deezer Developers"})]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Application Domain must be the same as your multi-scrobbler domain. Default is ",(0,s.jsx)(n.code,{children:"localhost:9078"})]}),"\n",(0,s.jsxs)(n.li,{children:["Redirect URL must end in ",(0,s.jsx)(n.code,{children:"deezer/callback"})]}),"\n",(0,s.jsxs)(n.li,{children:["Default would be ",(0,s.jsx)(n.code,{children:"http://localhost:9078/deezer/callback"})]}),"\n"]}),(0,s.jsx)(n.p,{children:'After application creation you should have credentials displayed in the "My Apps" dashboard. You will need:'}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Application ID"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Secret Key"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Redirect URL"})," (if not the default)"]}),"\n"]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"If no access token is provided..."})}),(0,s.jsxs)(n.p,{children:["After starting multi-scrobbler with credentials in-place open the dashboard (",(0,s.jsx)(n.code,{children:"http://localhost:9078"}),") and find your Deezer source. Click ",(0,s.jsx)(n.strong,{children:"(Re)authenticate and (re)start polling"})," to start the login process. After login is complete polling will begin automatically."]}),(0,s.jsx)(n.h6,{id:"configuration-1",children:"Configuration"}),(0,s.jsxs)(l.default,{groupId:"configType",queryString:!0,children:[(0,s.jsx)(o.default,{value:"env",label:"ENV",children:(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Environmental Variable"}),(0,s.jsx)(n.th,{children:"Required?"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DEEZER_CLIENT_ID"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{}),(0,s.jsxs)(n.td,{children:["Your ",(0,s.jsx)(n.strong,{children:"Application ID"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DEEZER_CLIENT_SECRET"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{}),(0,s.jsxs)(n.td,{children:["Your ",(0,s.jsx)(n.strong,{children:"Secret Key"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DEEZER_REDIRECT_URI"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"http://localhost:9078/deezer/callback"})}),(0,s.jsxs)(n.td,{children:["URI must end in ",(0,s.jsx)(n.code,{children:"deezer/callback"})]})]})]})]})}),(0,s.jsxs)(o.default,{value:"file",label:"File",children:[(0,s.jsx)(a(),{title:"CONFIG_DIR/deezer.json",language:"json5",children:h}),(0,s.jsxs)(n.p,{children:["or ",(0,s.jsx)(c,{lower:!0,objectName:"DeezerSourceConfig"})]})]}),(0,s.jsxs)(o.default,{value:"aio",label:"AIO",children:[(0,s.jsx)(i,{data:h,name:"deezer"}),(0,s.jsxs)(n.p,{children:["or ",(0,s.jsx)(c,{lower:!0,objectName:"DeezerSourceConfig"})]})]})]})]})]})}function f(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}function g(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);
"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["8051"],{70003:function(e,n,i){i.d(n,{ZP:()=>a,d$:()=>o});var s=i(85893),r=i(50065),l=i(75752),t=i.n(l);let o=[];function c(e){let n={a:"a",code:"code",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"Source"})," that monitors active listening uses one of two metrics to determine if a Song is scrobbable based on your listening:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"percent"})," of track listened to (50% or more)"]}),"\n",(0,s.jsxs)(n.li,{children:["or amount of time (",(0,s.jsx)(n.strong,{children:"duration"}),") track was listened to (4 minutes or more)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["These default values are based on ",(0,s.jsx)(n.a,{href:"https://www.last.fm/api/scrobbling#when-is-a-scrobble-a-scrobble",children:"last.fm's scrobble guidance."})]}),"\n",(0,s.jsxs)(n.p,{children:["These values can be customized in the ",(0,s.jsx)(n.code,{children:"options"})," of Source's ",(0,s.jsx)(n.a,{href:"/configuration#configuration-types",children:"file or aio config"}),":"]}),"\n",(0,s.jsx)(t(),{language:"json5",title:`${e.filename}.json`,children:`{
  "data": {
      // ...
  },
  "options": {
      // highlight-start
      "scrobbleThresholds": {
          "duration": 40, // scrobbable if listened to for 40 seconds or more
          "percent": 20   // scrobbable if listened to for 20% or more of the track's length
      }
      // highlight-end
  }
}`})]})}function a(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},68875:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>h,default:()=>p,toc:()=>j,metadata:()=>s,assets:()=>x,contentTitle:()=>u});var s=JSON.parse('{"id":"configuration/configuration","title":"Overview","description":"Check the FAQ if you have any issues after configuration!","source":"@site/docs/configuration/configuration.mdx","sourceDirName":"configuration","slug":"/configuration/","permalink":"/multi-scrobbler/configuration/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/configuration/configuration.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Overview","toc_max_heading_level":3},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/multi-scrobbler/updating/"},"next":{"title":"Overview","permalink":"/multi-scrobbler/configuration/clients/"}}'),r=i(85893),l=i(50065),t=i(703),o=i(73752),c=i(75752),a=i.n(c);i(13727),i(49437),i(94728),i(70003);var d=i(51952);let h={sidebar_position:2,title:"Overview",toc_max_heading_level:3},u=void 0,x={},j=[{value:"Configuration Types",id:"configuration-types",level:2},{value:"Setup Sources and Clients",id:"setup-sources-and-clients",level:2},{value:"Secrets Interpolation",id:"secrets-interpolation",level:2},{value:"Application Options",id:"application-options",level:2},{value:"Base URL",id:"base-url",level:3},{value:"Caching",id:"caching",level:3},{value:"Configuration",id:"configuration",level:5},{value:"Configuration",id:"configuration-1",level:5},{value:"Configuration",id:"configuration-2",level:5},{value:"Secondary Caching Configuration",id:"secondary-caching-configuration",level:4},{value:"Debug Mode",id:"debug-mode",level:3},{value:"Disable Web",id:"disable-web",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Upstream Services Status",id:"upstream-services-status",level:3},{value:"Webhook Configurations",id:"webhook-configurations",level:3},{value:"Gotify",id:"gotify",level:4},{value:"Ntfy",id:"ntfy",level:4},{value:"Apprise",id:"apprise",level:4},{value:"Health Endpoint",id:"health-endpoint",level:3},{value:"Prometheus",id:"prometheus",level:3}];function f(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components},{Details:i,DetailsAdmo:s}=n;return i||g("Details",!0),s||g("DetailsAdmo",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Check the ",(0,r.jsx)(n.a,{href:"/multi-scrobbler/FAQ",children:(0,r.jsx)(n.strong,{children:"FAQ"})})," if you have any issues after configuration!"]})}),"\n",(0,r.jsx)(n.h2,{id:"configuration-types",children:"Configuration Types"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/configuration/sources",children:(0,r.jsx)(n.strong,{children:"Sources"})})," and ",(0,r.jsx)(n.a,{href:"/configuration/clients",children:(0,r.jsx)(n.strong,{children:"Clients"})})," are configured using:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"environmental (ENV) variables"}),"\n",(0,r.jsx)(n.li,{children:"client/source specific json config files"}),"\n",(0,r.jsx)(n.li,{children:"an all-in-one json config file"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"MS will parse configuration from all configuration types."})," You can mix and match configurations but it is generally better to stick to one or the other."]}),"\n",(0,r.jsxs)(t.default,{groupId:"configType",queryString:!0,children:[(0,r.jsxs)(o.default,{value:"env",label:"ENV",children:[(0,r.jsxs)(n.p,{children:["MS will parse environmental variables present in the OS/container when it is run. ",(0,r.jsx)(n.strong,{children:"This method means MS does not require files to run."})]}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Use ENV-based configuration if..."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You are the only person for whom MS is scrobbling for"}),"\n",(0,r.jsxs)(n.li,{children:["You have a very simple setup for MS such as one scrobble ",(0,r.jsx)(n.a,{href:"/configuration/clients",children:"Client"})," and one ",(0,r.jsx)(n.a,{href:"/configuration/sources",children:"Source"})," IE Plex -> Maloja"]}),"\n"]})]}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Config Example"}),(0,r.jsx)(n.p,{children:"For Docker container..."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'docker run -e "SPOTIFY_CLIENT_ID=yourId" -e "SPOTIFY_CLIENT_SECRET=yourSecret" ...\n'})}),(0,r.jsx)(n.p,{children:"For Docker Compose"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:"services:\n    multi-scrobbler:\n        image: foxxmd/multi-scrobbler\n        environment:\n            - SPOTIFY_CLIENT_ID=yourId\n            - SPOTIFY_CLIENT_SECRET=yourSecret\n            - MALOJA_URL=http://domain.tld:42010\n            - MALOJA_API_KEY=1234\n            # ...\n        # ...\n"})}),(0,r.jsx)(n.p,{children:"For a local/node installation export variables before running..."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"SPOTIFY_CLIENT_ID=yourId SPOTIFY_CLIENT_SECRET=yourSecret npm run start\n"})})]})]}),(0,r.jsxs)(o.default,{value:"file",label:"File",children:[(0,r.jsxs)(n.p,{children:["MS will parse configuration files located in the directory specified by the ",(0,r.jsx)(n.code,{children:"CONFIG_DIR"})," environmental variable. This variable defaults to:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Local installation -> ",(0,r.jsx)(n.code,{children:"PROJECT_DIR/config"})]}),"\n",(0,r.jsxs)(n.li,{children:["Docker -> ",(0,r.jsx)(n.code,{children:"/config"})," (in the container) -- see the ",(0,r.jsx)(n.a,{href:"/multi-scrobbler/installation/#docker",children:"install docs"})," for how to configure this correctly"]}),"\n"]}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Use File-based configuration if..."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You have many ",(0,r.jsx)(n.a,{href:"/configuration/sources",children:"Sources"})]}),"\n",(0,r.jsxs)(n.li,{children:["You have many of each type of ",(0,r.jsx)(n.strong,{children:"Source"})," you want to scrobble from IE 2x Plex accounts, 3x Spotify accounts, 1x\nFunkwhale..."]}),"\n",(0,r.jsxs)(n.li,{children:["You have more than one scrobble ",(0,r.jsx)(n.strong,{children:"Client"})," you want to scrobble to IE multiple Maloja servers"]}),"\n",(0,r.jsxs)(n.li,{children:["You want only to scrobble to specific ",(0,r.jsx)(n.strong,{children:"Clients"})]}),"\n",(0,r.jsxs)(n.li,{children:["You need to setup more advanced configuration for a Source/Client","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Most Source/Clients only support basic configuration through ENV, all configuration is possible using File/AIO"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["There are ",(0,r.jsx)(n.strong,{children:"example configurations"})," for all Source/Client types and AIO config located in the ",(0,r.jsx)(n.a,{href:"https://github.com/FoxxMD/multi-scrobbler/tree/master/config",children:(0,r.jsx)(n.code,{children:"/config"})})," directory of this project. These can be used as-is by renaming them to ",(0,r.jsx)(n.code,{children:".json"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"For docker installations these examples are copied to your configuration directory on first-time use."}),"\n",(0,r.jsxs)(n.li,{children:["There is also a ",(0,r.jsx)(n.a,{href:"/configuration/kitchensink",children:(0,r.jsx)(n.strong,{children:"kitchensink example"})})," that provides examples of using all sources/clients in a complex configuration."]}),"\n"]})}),(0,r.jsxs)(n.p,{children:["Each file is named by the ",(0,r.jsx)(n.strong,{children:"type"})," of the Client/Source found in below sections. Each file as an ",(0,r.jsx)(n.strong,{children:"array"})," of that type of Client/Source."]}),(0,r.jsx)(n.p,{children:"Example directory structure:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/CONFIG_DIR\n    plex.json\n    spotify.json\n    maloja.json\n"})}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Config Example"}),(0,r.jsx)(a(),{title:"CONFIG_DIR/spotify.json",language:"json5",children:d.Z})]})]}),(0,r.jsxs)(o.default,{value:"aio",label:"File AIO",children:[(0,r.jsxs)(n.p,{children:["MS will parse an ",(0,r.jsx)(n.strong,{children:"all-in-one"})," configuration file located in the directory specified by the ",(0,r.jsx)(n.code,{children:"CONFIG_DIR"})," environmental variable. This variable defaults to:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Local installation -> ",(0,r.jsx)(n.code,{children:"PROJECT_DIR/config/config.json"})]}),"\n",(0,r.jsxs)(n.li,{children:["Docker -> ",(0,r.jsx)(n.code,{children:"/config/config.json"})," (in the container) -- see the ",(0,r.jsx)(n.a,{href:"/multi-scrobbler/installation/#docker",children:"install docs"})," for how to configure this correctly"]}),"\n"]}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Use AIO-based configuration if..."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You have many ",(0,r.jsx)(n.a,{href:"/configuration/sources",children:"Sources"})]}),"\n",(0,r.jsxs)(n.li,{children:["You have many of each type of ",(0,r.jsx)(n.strong,{children:"Source"})," you want to scrobble from IE 2x Plex accounts, 3x Spotify accounts, 1x\nFunkwhale..."]}),"\n",(0,r.jsxs)(n.li,{children:["You have more than one scrobble ",(0,r.jsx)(n.strong,{children:"Client"})," you want to scrobble to IE multiple Maloja servers"]}),"\n",(0,r.jsxs)(n.li,{children:["You want only to scrobble to specific ",(0,r.jsx)(n.strong,{children:"Clients"})]}),"\n",(0,r.jsxs)(n.li,{children:["You need to setup ",(0,r.jsx)(n.a,{href:"#monitoring",children:"monitoring/webhooks"})]}),"\n",(0,r.jsx)(n.li,{children:"You want to setup defaults for all Sources/Clients"}),"\n"]})]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"The AIO config also enables setting default options for sources/clients as well as global options for MS itself."})}),(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["An example AIO config files can be found in the project directory at ",(0,r.jsx)(n.a,{href:"https://github.com/FoxxMD/multi-scrobbler/tree/master/config/config.json.example",children:(0,r.jsx)(n.code,{children:"/config/config.json.example"})})]}),"\n",(0,r.jsx)(n.li,{children:"For docker installations this example is copied to your configuration directory on first-time use."}),"\n",(0,r.jsxs)(n.li,{children:["There is also a ",(0,r.jsx)(n.a,{href:"/configuration/kitchensink",children:(0,r.jsx)(n.strong,{children:"kitchensink example"})})," that provides examples of using all sources/clients in a complex configuration."]}),"\n"]})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://json-schema.app/view/%23?url=https%3A%2F%2Fraw.githubusercontent.com%2FFoxxMD%2Fmulti-scrobbler%2Fmaster%2Fsrc%2Fbackend%2Fcommon%2Fschema%2Faio.json",children:(0,r.jsx)(n.strong,{children:"Explore the schema for this configuration, along with an example generator and validator, here"})})}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Config Example"}),(0,r.jsx)(a(),{title:"CONFIG_DIR/config.json",language:"json5",children:'{\n  "debugMode": false,\n  "disableWeb": false,\n  "sourceDefaults": {\n    "logPayload": false,\n    "logFilterFailure": "warn",\n    "logPlayerState": false,\n    "scrobbleThresholds": {\n      "duration": 30,\n      "percent": 50\n    },\n    "maxPollRetries": 1,\n    "maxRequestRetries": 1,\n    "retryMultiplier": 1.5\n  },\n  "clientDefaults": {\n    "maxRequestRetries": 1,\n    "retryMultiplier": 1.5\n  },\n  "sources": [\n    {\n      "type": "spotify",\n      "enable": true,\n      "clients": ["myConfig"],\n      "name": "mySpotifySource",\n      "data": {\n        "clientId": "a89cba1569901a0671d5a9875fed4be1",\n        "clientSecret": "ec42e09d5ae0ee0f0816ca151008412a",\n        "redirectUri": "http://localhost:9078/callback"\n      }\n    }\n  ],\n  "clients": [\n    {\n      "type": "maloja",\n      "enable": true,\n      "name": "myConfig",\n      "data": {\n        "url": "http://localhost:42010",\n        "apiKey": "myMalojaKey"\n      }\n    }\n  ],\n  "webhooks": [\n    {\n      "name": "FirstGotifyServer",\n      "type": "gotify",\n      "url": "http://localhost:8070",\n      "token": "MyGotifyToken",\n      "priorities": {\n        "info": 5,\n        "warn": 7,\n        "error": 10\n      }\n    },\n    {\n      "type": "ntfy",\n      "name": "MyNtfyFriendlyNameForLogs",\n      "url": "http://localhost:9991",\n      "topic": "MyMultiScrobblerTopic",\n      "username": "Optional",\n      "password": "Optional",\n      "priorities": {\n        "info": 3,\n        "warn": 4,\n        "error": 5\n      }\n    }\n  ]\n}\n'})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"setup-sources-and-clients",children:"Setup Sources and Clients"}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"#configuration-types",children:"Configuration Types"})," above for your options for creating Source and Client configurations."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Reference ",(0,r.jsx)(n.a,{href:"/configuration/sources",children:(0,r.jsx)(n.strong,{children:"Scrobble Sources"})})," for what Sources are available"]}),"\n",(0,r.jsxs)(n.li,{children:["Reference ",(0,r.jsx)(n.a,{href:"/configuration/clients",children:(0,r.jsx)(n.strong,{children:"Scrobble Clients"})})," for what Clients are available"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Each entry for a Source/Client includes a ",(0,r.jsx)(n.strong,{children:"Configuration"})," section that describes how to configure it using a ",(0,r.jsx)(n.a,{href:"#configuration-types",children:"configuration type"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"secrets-interpolation",children:"Secrets Interpolation"}),"\n",(0,r.jsxs)(n.p,{children:["When using ",(0,r.jsx)(n.a,{href:"./?configType=file#configuration-types",children:"File"})," or ",(0,r.jsx)(n.a,{href:"./?configType=aio#configuration-types",children:"AIO"})," Configuration, Multi-Scrobbler can interpolate Environmental Variables into your json files. This can be used, for example, to keep sensitive data (like ",(0,r.jsx)(n.a,{href:"/configuration/clients/lastfm#configuration",children:"Last.fm Client/Secret"}),") out of your configuration files so that they can be committed to git."]}),"\n",(0,r.jsxs)(n.p,{children:["Multi-scrobbler will look for patterns in text fields within ",(0,r.jsx)(n.em,{children:"all"})," of your json files:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Some part of the text field matches: ",(0,r.jsx)(n.code,{children:"[[MY_ENV]]"})]}),"\n",(0,r.jsxs)(n.li,{children:["Is replaced by the value of the Environmental Variable named ",(0,r.jsx)(n.code,{children:"MY_ENV"})]}),"\n"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsxs)(n.p,{children:["Given this ",(0,r.jsx)(n.a,{href:"/configuration/clients/lastfm#configuration",children:"Last.fm"})," ",(0,r.jsx)(n.a,{href:"./?configType=file#configuration-types",children:"File"})," config:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="lastfm.json"',children:'[\n  {\n    "name": "myLastFmClient",\n    "configureAs": "client",\n    "data": {\n      "apiKey": "[[MY_APIKEY]]",\n      "secret": "[[MY_SECRET]]",\n      "redirectUri": "http://localhost:9078/lastfm/callback"\n    }\n  }\n]\n'})}),(0,r.jsxs)(n.p,{children:["And these environmental variables, in this scenario set through ",(0,r.jsx)(n.code,{children:"environment"})," in the ",(0,r.jsx)(n.a,{href:"/quickstart#create-docker-compose-file",children:"docker compose installation"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"MY_APIKEY=a89cba1569901a0671d5a9875fed4be1\nMY_SECRET=ec42e09d5ae0ee0f0816ca151008412a\n"})}),(0,r.jsx)(n.p,{children:"The resulting json multi-scrobbler would use:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="lastfm.json"',children:'[\n  {\n    "name": "myLastFmClient",\n    "configureAs": "client",\n    "data": {\n      "apiKey": "a89cba1569901a0671d5a9875fed4be1",\n      "secret": "ec42e09d5ae0ee0f0816ca151008412a",\n      "redirectUri": "http://localhost:9078/lastfm/callback"\n    }\n  }\n]\n'})})]}),"\n",(0,r.jsx)(s,{type:"note",summary:"Caveats",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ENV variable names/interpolation keys are case-insensitive"}),"\n",(0,r.jsxs)(n.li,{children:["Interpolation only works for ",(0,r.jsx)(n.strong,{children:"string"})," values within json. This cannot be used for numbers, booleans, objects, etc..."]}),"\n"]})}),"\n",(0,r.jsxs)(s,{type:"warning",summary:"Missing ENVs",children:[(0,r.jsxs)(n.p,{children:["Multi-scrobbler ",(0,r.jsx)(n.strong,{children:"will not"})," throw an error if the environmental value is not found. Instead, it will leave the string as-is and log a warning (",(0,r.jsx)(n.code,{children:"WARN"})," level) with the names of the missing environmental variable names like so:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"WARN : [App] [Sources] [spotify Secrets] Matched: None | Unmatched: SPOTIFY_SECRET\n"})})]}),"\n",(0,r.jsx)(s,{type:"warning",summary:"ENV Name Collisions",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verify that interpolation keys/environmental variable names you will use do not collide with existing ENV names used by multi-scrobbler."})," Use the docs search to verify the name you want to use is not already used elsewhere by multi-scrobbler."]})}),"\n",(0,r.jsx)(n.h2,{id:"application-options",children:"Application Options"}),"\n",(0,r.jsx)(n.p,{children:"These options affect multi-scrobbler's behavior and are not specific to any source/client."}),"\n",(0,r.jsx)(n.h3,{id:"base-url",children:"Base URL"}),"\n",(0,r.jsxs)(n.p,{children:["Defines the URL that is used to generate default redirect URLs for authentication on ",(0,r.jsx)(n.a,{href:"/configuration/sources/spotify",children:"spotify"})," and ",(0,r.jsx)(n.a,{href:"/configuration/clients/lastfm",children:"lastfm"})," -- as well as some logging hints."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Default => ",(0,r.jsx)(n.code,{children:"http://localhost:9078"})]}),"\n",(0,r.jsxs)(n.li,{children:["Set with ",(0,r.jsx)(n.a,{href:"./?configType=env#configuration-types",children:"ENV"})," ",(0,r.jsx)(n.code,{children:"BASE_URL"})," or ",(0,r.jsx)(n.code,{children:"baseUrl"})," ",(0,r.jsx)(n.a,{href:"./?configType=aio#configuration-types",children:"all-in-one configuration"})]}),"\n",(0,r.jsxs)(n.li,{children:["If protocol is ",(0,r.jsx)(n.code,{children:"http"})," or no protocol is specified MS will try to use port ",(0,r.jsx)(n.code,{children:"9078"})," -- to override this explicitly set the port or use ",(0,r.jsx)(n.code,{children:"https"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Useful when running with ",(0,r.jsx)(n.a,{href:"/multi-scrobbler/installation/#docker",children:"docker"})," so that you do not need to specify redirect URLs for each configuration."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsxs)(n.p,{children:["EX Lastfm Redirect Url is ",(0,r.jsx)(n.code,{children:"BASE_URL:PORT/lastfm/callback"})," (when no other redirectUri is specified for ",(0,r.jsx)(n.a,{href:"/configuration/clients/lastfm",children:"lastfm configuration"}),")"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.code,{children:"BASE_URL"})}),(0,r.jsx)(n.th,{children:"Redirect URL"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"192.168.0.101"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://192.168.0.101:9078/lastfm/callback"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://my.domain.local"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://my.domain.local:9078/lastfm/callback"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://192.168.0.101/my/subfolder"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://192.168.0.101:9078/my/subfolder/lastfm/callback"})})]})]})]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.code,{children:"BASE_URL"})}),(0,r.jsx)(n.th,{children:"Redirect URL"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"my.domain.local:80"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://192.168.0.101:80/lastfm/callback"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"my.domain.local:9000"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://my.domain.local:9000/lastfm/callback"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"192.168.0.101:4000/my/subfolder"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://192.168.0.101:4000/my/subfolder/lastfm/callback"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://192.168.0.101"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://192.168.0.101:443/lastfm/callback"})})]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"caching",children:"Caching"}),"\n",(0,r.jsx)(n.p,{children:"Multi-scrobbler caches some activities to persist important data across restarts, reduce external API calls, and make some actions faster."}),"\n",(0,r.jsxs)(n.p,{children:["All of the activities below are ",(0,r.jsx)(n.strong,{children:"always"})," cached ",(0,r.jsx)(n.strong,{children:"in-memory"})," with an optional, configurable ",(0,r.jsxs)(n.a,{href:"#secondary-caching-configuration",children:[(0,r.jsx)(n.strong,{children:"secondary"})," store"]})," for persistence."]}),"\n",(0,r.jsxs)(t.default,{groupId:"cachedThings",queryString:!0,children:[(0,r.jsxs)(o.default,{value:"scrobbles",label:"Scrobbles",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Queued"})," and ",(0,r.jsx)(n.strong,{children:"Failed"})," Scrobbles are cached so that any un-scrobbled data you have is persisted across restarts of multi-scrobbler."]}),(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.p,{children:["By default, this data use a ",(0,r.jsx)(n.a,{href:"#secondary-caching-configuration",children:"Secondary"})," ",(0,r.jsx)(n.a,{href:"./?cacheType=file#secondary-caching-configuration",children:"File"})," store, configured for you automatically."]}),(0,r.jsxs)(n.p,{children:["If you have configured a ",(0,r.jsx)(n.a,{href:"/installation#storage",children:"persisted volume/bind mount"})," for configuration (",(0,r.jsx)(n.code,{children:"/config"})," is mounted in ",(0,r.jsx)(n.a,{href:"/quickstart#create-docker-compose-file",children:"docker compose"}),") then you are already done. If you are not persisting this directory then you should consider setting up ",(0,r.jsx)(n.a,{href:"./?cacheType=valkey#secondary-caching-configuration",children:"Valkey Cache"})," for this."]})]}),(0,r.jsx)(n.h5,{id:"configuration",children:"Configuration"}),(0,r.jsxs)(n.p,{children:["Use any ",(0,r.jsx)(n.a,{href:"#secondary-caching-configuration",children:"Secondary Cache"}),", the config examples below show the default values:"]}),(0,r.jsxs)(t.default,{children:[(0,r.jsx)(o.default,{value:"env",label:"ENV",children:(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Environmental Variable"}),(0,r.jsx)(n.th,{children:"Required?"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_SCROBBLE"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file"})}),(0,r.jsx)(n.td,{children:"The cache type to use"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_SCROBBLE_CONN"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/config"})}),(0,r.jsx)(n.td,{})]})]})]})}),(0,r.jsx)(o.default,{value:"aio",label:"AIO",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n    "cache": {\n        "scrobble": {\n            "provider": "file",\n            "connection": "/config"\n        }\n    },\n    // ...\n}\n'})})})]})]}),(0,r.jsxs)(o.default,{value:"auth",label:"Auth Data",children:[(0,r.jsx)(n.p,{children:"Authentication sessions/tokens/etc... are cached for quicker requests and for persistence across restarts."}),(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.p,{children:["By default, this data use a ",(0,r.jsx)(n.a,{href:"#secondary-caching-configuration",children:"Secondary"})," ",(0,r.jsx)(n.a,{href:"./?cacheType=file#secondary-caching-configuration",children:"File"})," store, configured for you automatically."]}),(0,r.jsxs)(n.p,{children:["If you have configured a ",(0,r.jsx)(n.a,{href:"/installation#storage",children:"persisted volume/bind mount"})," for configuration (",(0,r.jsx)(n.code,{children:"/config"})," is mounted in ",(0,r.jsx)(n.a,{href:"/quickstart#create-docker-compose-file",children:"docker compose"}),") then you are already done. If you are not persisting this directory then you should consider setting up ",(0,r.jsx)(n.a,{href:"./?cacheType=valkey#secondary-caching-configuration",children:"Valkey Cache"})," for this."]})]}),(0,r.jsx)(n.h5,{id:"configuration-1",children:"Configuration"}),(0,r.jsxs)(n.p,{children:["Use any ",(0,r.jsx)(n.a,{href:"#secondary-caching-configuration",children:"Secondary Cache"}),", the config examples below show the default values:"]}),(0,r.jsxs)(t.default,{children:[(0,r.jsx)(o.default,{value:"env",label:"ENV",children:(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Environmental Variable"}),(0,r.jsx)(n.th,{children:"Required?"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_AUTH"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file"})}),(0,r.jsx)(n.td,{children:"The cache type to use"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_AUTH_CONN"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/config"})}),(0,r.jsx)(n.td,{})]})]})]})}),(0,r.jsx)(o.default,{value:"aio",label:"AIO",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n    "cache": {\n        "auth": {\n            "provider": "file",\n            "connection": "/config"\n        }\n    },\n    // ...\n}\n'})})})]})]}),(0,r.jsxs)(o.default,{value:"metadata",label:"Transform API Calls",children:[(0,r.jsxs)(n.p,{children:["API Calls to external (metadata) services used to ",(0,r.jsx)(n.a,{href:"/configuration/transforms",children:"Enhance Scrobbles"}),", like calls to ",(0,r.jsx)(n.a,{href:"/configuration/transforms/musicbrainz",children:"Musicbrainz"}),", can be cached to avoid duplicate calls and speed up scrobble transformations."]}),(0,r.jsxs)(n.p,{children:["By default, these calls are only cached in memory. If you wish for cached calls to be persisted across restarts then setup ",(0,r.jsx)(n.a,{href:"./?cacheType=valkey#secondary-caching-configuration",children:"Valkey Cache"}),"."]}),(0,r.jsx)(n.h5,{id:"configuration-2",children:"Configuration"}),(0,r.jsxs)(n.p,{children:["Use any ",(0,r.jsx)(n.a,{href:"#secondary-caching-configuration",children:"Secondary Cache"}),", the config examples below show the default values:"]}),(0,r.jsxs)(t.default,{children:[(0,r.jsx)(o.default,{value:"env",label:"ENV",children:(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Environmental Variable"}),(0,r.jsx)(n.th,{children:"Required?"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_METADATA"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"The cache type to use"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_METADATA_CONN"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{})]})]})]})}),(0,r.jsx)(o.default,{value:"aio",label:"AIO",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n    "cache": {\n        "metadata": {\n            "provider": "valkey",\n            "connection": "yourConnectionStringHere"\n        }\n    },\n    // ...\n}\n'})})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"secondary-caching-configuration",children:"Secondary Caching Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["The type of cache used, and its connection properties, can be configured through ",(0,r.jsx)(n.strong,{children:"ENV"})," or ",(0,r.jsx)(n.strong,{children:"AIO"})," config."]}),"\n",(0,r.jsxs)(t.default,{groupId:"cacheType",queryString:!0,children:[(0,r.jsxs)(o.default,{value:"file",label:"File",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File"})," cache is stored in the ",(0,r.jsx)(n.code,{children:"CONFIG_DIR"})," directory using the pre-defined file name ",(0,r.jsx)(n.code,{children:"ms-[cacheName].cache"}),"."]}),(0,r.jsxs)(t.default,{groupId:"configType",queryString:!0,children:[(0,r.jsxs)(o.default,{value:"env",label:"ENV",children:[(0,r.jsx)(n.p,{children:"Example"}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Environmental Variable"}),(0,r.jsx)(n.th,{children:"Required?"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_SCROBBLE"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file"})}),(0,r.jsx)(n.td,{children:"The cache type to use"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_SCROBBLE_CONN"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/config"})}),(0,r.jsx)(n.td,{children:"The directory, within the container, to store the cache file"})]})]})]})]}),(0,r.jsxs)(o.default,{value:"aio",label:"AIO",children:[(0,r.jsx)(n.p,{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n    "cache": {\n        "scrobble": {\n            "provider": "file",\n            "connection": "/config"\n        }\n    },\n    // ...\n}\n'})})]})]})]}),(0,r.jsxs)(o.default,{value:"valkey",label:"Valkey",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://valkey.io/",children:(0,r.jsx)(n.strong,{children:"Valkey"})})," is an open-source fork of Redis."]}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Adding Valkey container to multi-scrobbler"}),(0,r.jsxs)(n.p,{children:["A valkey container can be added to the ",(0,r.jsx)(n.a,{href:"/installation?runType=docker-compose#docker",children:"multi-scrobbler docker compose stack"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:"services:\n  multi-scrobbler:\n  # ...\n  # adding everything below\n  // highlight-start\n  valkey:\n    image: valkey/valkey\n    volumes:\n      - valkeydata:/data\n\nvolumes:\n  valkeydata:\n    driver: local\n  // highlight-end\n"})}),(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"redis://valkey:6379"})," as the connection string in the configurations below."]})]}),(0,r.jsx)(n.p,{children:"The connection string used by multi-scrobbler to connect to your Valkey instance must be in the form:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"redis://HOST_IP:HOST_PORT\n"})}),(0,r.jsxs)(t.default,{groupId:"configType",queryString:!0,children:[(0,r.jsxs)(o.default,{value:"env",label:"ENV",children:[(0,r.jsx)(n.p,{children:"Example"}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Environmental Variable"}),(0,r.jsx)(n.th,{children:"Required?"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_METADATA"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"valkey"})}),(0,r.jsx)(n.td,{children:"The cache type to use"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"CACHE_METADATA_CONN"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{}),(0,r.jsxs)(n.td,{children:["The host/IP and port to connect to EX: ",(0,r.jsx)(n.code,{children:"redis://192.168.0.120:6379"})]})]})]})]})]}),(0,r.jsxs)(o.default,{value:"aio",label:"AIO",children:[(0,r.jsx)(n.p,{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n    "cache": {\n        "metadata": {\n            "provider": "valkey",\n            "connection": "redis://192.168.0.120:6379"\n        }\n    },\n    // ...\n}\n'})})]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"debug-mode",children:"Debug Mode"}),"\n",(0,r.jsx)(n.p,{children:"Turning on Debug Mode will"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'override and enable all optional "debugging" options found in configuration'}),"\n",(0,r.jsx)(n.li,{children:"set log output to DEBUG"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Use this as a shortcut for enabling output that can be used for troubleshooting and issue reporting. Be aware that logs will likely be VERY noisy while Debug Mode is on. You should only have this mode on while gathering logs for troubleshooting and then turn it off afterwards."}),"\n",(0,r.jsxs)(n.p,{children:["To set debug mode either add it to ",(0,r.jsxs)(n.a,{href:"./?configType=aio#configuration-types",children:["AIO ",(0,r.jsx)(n.code,{children:"config.json"})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n    "debugMode": true,\n    "sources": [...],\n    // ...\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["or set the ",(0,r.jsx)(n.a,{href:"./?configType=env#configuration-types",children:"ENV"})," ",(0,r.jsx)(n.code,{children:"DEBUG_MODE=true"})]}),"\n",(0,r.jsx)(n.h3,{id:"disable-web",children:"Disable Web"}),"\n",(0,r.jsx)(n.p,{children:"If you do not need the dashboard and/or ingress sources, or have security concerns about ingress and cannot control your hosting environment, the web server and API can be disabled."}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["Any ",(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.a,{href:"/configuration/sources?sourceComm=ingress#by-communication-method",children:"ingress-based sources"})," will be unusable"]})," (Webscrobbler, etc...) if this is disabled."]})}),"\n",(0,r.jsx)(n.p,{children:"Disable using either:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["ENV ",(0,r.jsx)(n.code,{children:"DISABLE_WEB=true"})]}),"\n",(0,r.jsxs)(n.li,{children:["In ",(0,r.jsx)(n.a,{href:"./?configType=aio#configuration-types",children:"All-in-One File"})," use the top-level property ",(0,r.jsx)(n.code,{children:'"disableWeb": true'})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,r.jsx)(n.h3,{id:"upstream-services-status",children:"Upstream Services Status"}),"\n",(0,r.jsx)(n.p,{children:"A status page for monitoring the reachability of public services used by some Sources/Clients is available at"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://status.multi-scrobbler.app",children:"https://status.multi-scrobbler.app"})})}),"\n",(0,r.jsxs)(n.p,{children:["This monitor runs on a VPS and checks the uptime of ",(0,r.jsx)(n.em,{children:"actual"})," APIs for these services, not just landing pages. On a ~minute interval it checks:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Listenbrainz API"}),"\n",(0,r.jsx)(n.li,{children:"Musicbrainz API"}),"\n",(0,r.jsx)(n.li,{children:"CoverArtArchive API"}),"\n",(0,r.jsx)(n.li,{children:"Last.fm API"}),"\n",(0,r.jsx)(n.li,{children:"A few MS-hosted support services"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"webhook-configurations",children:"Webhook Configurations"}),"\n",(0,r.jsxs)(n.p,{children:["Webhooks will ",(0,r.jsx)(n.strong,{children:"push"})," a notification to your configured servers on these events:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Source polling started"}),"\n",(0,r.jsx)(n.li,{children:"Source polling retry"}),"\n",(0,r.jsx)(n.li,{children:"Source polling stopped on error"}),"\n",(0,r.jsx)(n.li,{children:"Scrobble client scrobble failure"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Webhooks are configured in the AIO ",(0,r.jsx)(n.a,{href:"#configuration-types",children:"config.json"})," file under the ",(0,r.jsx)(n.code,{children:"webhook"})," top-level property. Multiple webhooks may be configured for each webhook type."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  "sources": [\n    //...\n  ],\n  "clients": [\n    //...\n  ],\n  "webhooks": [\n    {\n      "name": "FirstGotifyServer",\n      "type": "gotify",\n      "url": "http://192.168.0.100:8070",\n      "token": "abcd"\n    },\n    {\n      "name": "SecondGotifyServer",\n      "type": "gotify",\n      //...\n    },\n    {\n      "name": "NtfyServerOne",\n      "type": "ntfy",\n      //...\n    },\n    //...\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"gotify",children:(0,r.jsx)(n.a,{href:"https://gotify.net/",children:"Gotify"})}),"\n",(0,r.jsxs)(n.p,{children:["Refer to the ",(0,r.jsx)(n.a,{href:"https://json-schema.app/view/%23/%23%2Fdefinitions%2FGotifyConfig?url=https%3A%2F%2Fraw.githubusercontent.com%2FFoxxMD%2Fmulti-scrobbler%2Fmaster%2Fsrc%2Fbackend%2Fcommon%2Fschema%2Faio.json",children:"config schema for GotifyConfig"})]}),"\n",(0,r.jsxs)(n.p,{children:["multi-scrobbler optionally supports setting message notification priority via ",(0,r.jsx)(n.code,{children:"info"})," ",(0,r.jsx)(n.code,{children:"warn"})," and ",(0,r.jsx)(n.code,{children:"error"})," mappings."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="config.json"',children:'{\n  "type": "gotify",\n  "name": "MyGotifyFriendlyNameForLogs",\n  "url": "http://192.168.0.100:8070",\n  "token": "AQZI58fA.rfSZbm",\n  "priorities": {\n    "info": 5,\n    "warn": 7,\n    "error": 10\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"ntfy",children:(0,r.jsx)(n.a,{href:"https://ntfy.sh/",children:"Ntfy"})}),"\n",(0,r.jsxs)(n.p,{children:["Refer to the ",(0,r.jsx)(n.a,{href:"https://json-schema.app/view/%23/%23%2Fdefinitions%2FNtfyConfig?url=https%3A%2F%2Fraw.githubusercontent.com%2FFoxxMD%2Fmulti-scrobbler%2Fmaster%2Fsrc%2Fbackend%2Fcommon%2Fschema%2Faio.json",children:"config schema for NtfyConfig"})]}),"\n",(0,r.jsxs)(n.p,{children:["multi-scrobbler optionally supports setting message notification priority via ",(0,r.jsx)(n.code,{children:"info"})," ",(0,r.jsx)(n.code,{children:"warn"})," and ",(0,r.jsx)(n.code,{children:"error"})," mappings."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="config.json"',children:'{\n  "type": "ntfy",\n  "name": "MyNtfyFriendlyNameForLogs",\n  "url": "http://192.168.0.100:9991",\n  "topic": "RvOwKJ1XtIVMXGLR",\n  "username": "Optional",\n  "password": "Optional",\n  "priorities": {\n    "info": 3,\n    "warn": 4,\n    "error": 5\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"apprise",children:(0,r.jsx)(n.a,{href:"https://github.com/caronc/apprise-api",children:"Apprise"})}),"\n",(0,r.jsxs)(n.p,{children:["Refer to the ",(0,r.jsx)(n.a,{href:"https://json-schema.app/view/%23/%23%2Fdefinitions%2FAppriseConfig?url=https%3A%2F%2Fraw.githubusercontent.com%2FFoxxMD%2Fmulti-scrobbler%2Fmaster%2Fsrc%2Fbackend%2Fcommon%2Fschema%2Faio.json",children:"config schema for AppriseConfig"})]}),"\n",(0,r.jsxs)(n.p,{children:["multi-scrobbler supports ",(0,r.jsx)(n.a,{href:"https://github.com/caronc/apprise-api?tab=readme-ov-file#stateless-solution",children:"stateless"})," and ",(0,r.jsx)(n.a,{href:"https://github.com/caronc/apprise-api?tab=readme-ov-file#persistent-storage-solution",children:"persistent storage"})," endpoints as well as ",(0,r.jsx)(n.a,{href:"https://github.com/caronc/apprise-api?tab=readme-ov-file#tagging",children:"tags"}),"/"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  "type": "apprise",\n  "name": "MyAppriseFriendlyNameForLogs",\n  "host": "http://192.168.0.100:8080",\n  "urls": ["gotify://192.168.0.101:8070/MyToken"], // stateless endpoints\n  "keys": ["e90b20526808373353afad7fb98a201198c0c3e0555bea19f182df3388af7b17"], //persistent storage endpoints\n  "tags": ["my","optional","tags"]\n}\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"health-endpoint",children:"Health Endpoint"}),"\n",(0,r.jsxs)(n.p,{children:["An endpoint for monitoring the health of sources/clients is available at GET ",(0,r.jsx)(n.code,{children:"http://YourMultiScrobblerDomain/api/health"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Returns ",(0,r.jsx)(n.code,{children:"200 OK"})," when ",(0,r.jsx)(n.strong,{children:"everything"})," is working or ",(0,r.jsx)(n.code,{children:"500 Internal Server Error"})," if ",(0,r.jsx)(n.strong,{children:"anything"})," is not"]}),"\n",(0,r.jsxs)(n.li,{children:["The plain url (",(0,r.jsx)(n.code,{children:"/api/health"}),") aggregates status of ",(0,r.jsx)(n.strong,{children:"all clients/sources"})," -- so any failing client/source will make status return 500","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use query params ",(0,r.jsx)(n.code,{children:"type"})," or ",(0,r.jsx)(n.code,{children:"name"})," to restrict client/sources aggregated IE ",(0,r.jsx)(n.code,{children:"/api/health?type=spotify"})," or ",(0,r.jsx)(n.code,{children:"/api/health?name=MyMaloja"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["On 500 the response returns a JSON payload with ",(0,r.jsx)(n.code,{children:"messages"})," array that describes any issues","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For any clients/sources that require authentication ",(0,r.jsx)(n.code,{children:"/api/health"})," will return 500 if they are ",(0,r.jsx)(n.strong,{children:"not authenticated"})]}),"\n",(0,r.jsxs)(n.li,{children:["For sources that poll (spotify, yt music, subsonic) ",(0,r.jsx)(n.code,{children:"/api/health"})," will 500 if they are ",(0,r.jsx)(n.strong,{children:"not polling"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"prometheus",children:"Prometheus"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.a,{href:"https://prometheus.io/",children:"Prometheus"})," export endpoint is available at GET ",(0,r.jsx)(n.code,{children:"http://YourMultiScrobblerDomain/api/metrics"})]}),"\n",(0,r.jsx)(n.p,{children:"It includes metrics for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Count of discovered plays per ",(0,r.jsx)(n.a,{href:"/configuration/sources",children:"Source"})]}),"\n",(0,r.jsxs)(n.li,{children:["Count of Queued/Scrobbled/Deadletter scrobbles per ",(0,r.jsx)(n.a,{href:"/configuration/clients",children:"Client"})]}),"\n",(0,r.jsxs)(n.li,{children:["Number of issues per Source/Client","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If any of these metrics is > 0 it means your Source/Client is not operating normally"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Additionally, general process metrics like cpu and memory usage can be enabled with the env ",(0,r.jsx)(n.code,{children:"PROMETHEUS_FULL=true"})]})]})}function p(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}function g(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},49437:function(e,n,i){i.d(n,{Z:()=>h}),i(67294);var s=i(75752),r=i.n(s),l=i(57682),t=i(77084);i(8267);var o=i(11142),c=i.n(o),a=i(85893);let d=e=>{let n,{data:i,name:s,client:t=!1}=e;try{n=c().parse(i)}catch(e){return console.error(e),(0,a.jsxs)(l.Z,{type:"danger",title:"Unexpected Error",children:[(0,a.jsx)("p",{children:"Example component crashed because of error!"}),(0,a.jsx)(r(),{children:e.message})]})}n=(n=n.filter(e=>void 0===e.configureAs||e.configureAs===(t?"client":"source"))).map(e=>({...e,type:s}));let o={[t?"clients":"sources"]:n};return(0,a.jsx)(r(),{title:"CONFIG_DIR/config.json",language:"json5",children:JSON.stringify(o,null,2)})},h=e=>(0,a.jsx)(t.default,{fallback:({error:e})=>(0,a.jsx)("div",{children:(0,a.jsxs)("p",{children:["Example component crashed because of error: ",e.message,"."]})}),children:(0,a.jsx)(d,{...e})})},94728:function(e,n,i){i.d(n,{Z:()=>h}),i(67294);var s=i(75752),r=i.n(s),l=i(57682),t=i(77084);i(8267);var o=i(11142),c=i.n(o),a=i(85893);let d=e=>{let n,{data:i,client:s=!1,...t}=e;try{n=c().parse(i)}catch(e){return console.error(e),(0,a.jsxs)(l.Z,{type:"danger",title:"Unexpected Error",children:[(0,a.jsx)("p",{children:"Example component crashed because of error!"}),(0,a.jsx)(r(),{children:e.message})]})}return n=n.filter(e=>void 0===e.configureAs||e.configureAs===(s?"client":"source")),(0,a.jsx)(r(),{...t,language:"json5",children:JSON.stringify(n,null,2)})},h=e=>(0,a.jsx)(t.default,{fallback:({error:e})=>(0,a.jsx)("div",{children:(0,a.jsxs)("p",{children:["Example component crashed because of error: ",e.message,"."]})}),children:(0,a.jsx)(d,{...e})})},13727:function(e,n,i){i.d(n,{Z:()=>l});var s=i(67294),r=i(85893);let l=e=>{let{children:n,lower:i,client:l=!1}=e,t=n;void 0===t&&(t=(0,r.jsxs)(s.Fragment,{children:[i?"explore":"Explore"," the schema with an example and live editor/validator"]}));let o=`https://json-schema.app/view/%23/%23%2Fdefinitions%2F${e.objectName}`;return(0,r.jsx)("a",{target:"_blank",href:`${o}?url=${l?"https%3A%2F%2Fraw.githubusercontent.com%2FFoxxMD%2Fmulti-scrobbler%2Fmaster%2Fsrc%2Fbackend%2Fcommon%2Fschema%2Fclient.json":"https%3A%2F%2Fraw.githubusercontent.com%2FFoxxMD%2Fmulti-scrobbler%2Fmaster%2Fsrc%2Fbackend%2Fcommon%2Fschema%2Fsource.json"}`,children:t})}},51952:function(e,n,i){i.d(n,{Z:()=>s});let s='[\n  {\n    "name": "MySpotify",\n    "enable": true,\n    "clients": [],\n    "data": {\n      "clientId": "a89cba1569901a0671d5a9875fed4be1",\n      "clientSecret": "ec42e09d5ae0ee0f0816ca151008412a",\n      "redirectUri": "http://localhost:9078/callback",\n      "interval": 60\n    }\n  }\n]\n'}}]);
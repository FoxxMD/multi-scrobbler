"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["6922"],{90481:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>o,default:()=>f,toc:()=>d,metadata:()=>s,assets:()=>h,contentTitle:()=>c});var s=JSON.parse('{"id":"configuration/transforms/musicbrainz","title":"Musicbrainz Stage","description":"The Musicbrainz Stage matches your Play data with the MusicBrainz database. If the match score is high enough then Multi-Scrobbler uses the match to correct and fill-in missing information in your Play data.","source":"@site/docs/configuration/transforms/musicbrainz.mdx","sourceDirName":"configuration/transforms","slug":"/configuration/transforms/musicbrainz","permalink":"/multi-scrobbler/configuration/transforms/musicbrainz","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/configuration/transforms/musicbrainz.mdx","tags":[],"version":"current","frontMatter":{"title":"Musicbrainz Stage","toc_min_heading_level":2,"toc_max_heading_level":5},"sidebar":"tutorialSidebar","previous":{"title":"Enhancing Scrobbles","permalink":"/multi-scrobbler/configuration/transforms/"},"next":{"title":"Native Stage","permalink":"/multi-scrobbler/configuration/transforms/native"}}'),r=i(85893),a=i(50065),t=i(703),l=i(73752);let o={title:"Musicbrainz Stage",toc_min_heading_level:2,toc_max_heading_level:5},c=void 0,h={},d=[{value:"Configuration",id:"configuration",level:2},{value:"API Setup",id:"api-setup",level:3},{value:"Stage Configuration",id:"stage-configuration",level:3},{value:"Rules",id:"rules",level:3},{value:"ENV Configuration",id:"env-configuration",level:2},{value:"Matching with Musicbrainz",id:"matching-with-musicbrainz",level:2},{value:"Searching",id:"searching",level:3},{value:"Retrying Search",id:"retrying-search",level:4},{value:"Refining",id:"refining",level:3},{value:"Score",id:"score",level:3},{value:"Filtering",id:"filtering",level:3},{value:"Release Attributes",id:"release-attributes",level:5},{value:"Empty Releases",id:"empty-releases",level:4},{value:"Sorting",id:"sorting",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Sensible Default",id:"sensible-default",level:3},{value:"Filter Considerations",id:"filter-considerations",level:3},{value:"Using Partial Match",id:"using-partial-match",level:3},{value:"Logging",id:"logging",level:2},{value:"Examples",id:"examples",level:2},{value:"Minimal",id:"minimal",level:3},{value:"Sensible Default",id:"sensible-default-1",level:3},{value:"Add Metadata Only (No Scrobble Modification)",id:"add-metadata-only-no-scrobble-modification",level:3},{value:"Use Native Stage if no Musicbrainz Matches",id:"use-native-stage-if-no-musicbrainz-matches",level:3}];function u(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components},{Details:i}=n;return i||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"Musicbrainz"})," ",(0,r.jsx)(n.a,{href:"/configuration/transforms#stage",children:"Stage"})," matches your Play data with the ",(0,r.jsx)(n.a,{href:"https://musicbrainz.org/",children:"MusicBrainz"})," database. If the match score is high enough then Multi-Scrobbler uses the match to correct and fill-in missing information in your Play data."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"This Stage is useful for standardizing your Scrobble's Play data, regardless of the Source it is coming from."})}),"\n",(0,r.jsxs)(n.p,{children:["Even if you have have strong opinions about the way your existing music is already tagged/organized you should consider adding the Musicbrainz Stage to your Sources, if only to benefit from adding ",(0,r.jsx)(n.a,{href:"#using-partial-match",children:"MBIDs to scrobbled metadata."})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Why Should I Prefer MusicBrainz?"}),(0,r.jsx)("h3",{children:"More Than Mainstream Data"}),(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.a,{href:"https://musicbrainz.org/statistics",children:"MusicBrainz database contains"})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"37 million+ tracks"}),"\n",(0,r.jsx)(n.li,{children:"5 million+ albums"}),"\n",(0,r.jsx)(n.li,{children:"2.7 million+ artists"}),"\n"]}),(0,r.jsx)(n.p,{children:"in over 200 languages, contributed by 10,000+ editors each year with many more users voting on edits."}),(0,r.jsx)(n.p,{children:"The database covers a much wider range of music than most commercial services since it isn't restricted by licensing or incentivized to prioritize mainstream music due to business interests. You are much more likely to find data for obscure, indie, and international artists."}),(0,r.jsx)("h3",{children:"As The Artist Intended"}),(0,r.jsx)(n.p,{children:'While some large services (Spotify) may be more consistent in data structure, the MusicBrainz equivalent data is likely to be more true to the way the Artist originally intended since individuals can devote effort to individual artists. A fan of an artist is much more likely to "get it right" for their favorite band than a corporate business trying to do the least amount of work for the largest result.'})]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["If you are using ",(0,r.jsx)(n.a,{href:"/configuration?config-type=env#configuration-types",children:"ENV Config"})," for multi-scrobbler and just want a quick and easy setup, skip to ",(0,r.jsx)(n.a,{href:"#env-configuration",children:(0,r.jsx)(n.strong,{children:"ENV Configuration"})}),"."]})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Set up ",(0,r.jsx)(n.a,{href:"/configuration?cachedThings=metadata#caching",children:"Valkey Caching"})," to cache Musicbrainz API calls for faster processing."]})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"api-setup",children:"API Setup"}),"\n",(0,r.jsxs)(n.p,{children:["To avoid rate limiting, MusicBrainz requires API users to identify themself using a ",(0,r.jsx)(n.a,{href:"https://wiki.musicbrainz.org/MusicBrainz_API/Rate_Limiting#How_can_I_be_a_good_citizen_and_be_smart_about_using_the_Web_Service?",children:"User-Agent that contains an email or URL."})," You must set this in the ",(0,r.jsx)(n.code,{children:"data"})," for your ",(0,r.jsx)(n.a,{href:"http://localhost:3000/docs/configuration/transforms/#configuring-stages",children:"stage configuration"})," in your ",(0,r.jsx)(n.a,{href:"/configuration?configType=aio#configuration-types",children:"AIO Config"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  // ...\n  "transformers": [\n    {\n      "type": "musicbrainz",\n      "name": "MyMB",\n      "data": {\n        "apis": [\n          {\n            "contact": "contact@mydomain.com"\n          }\n        ]\n      },\n    }\n  ]\n}\n'})}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Additional Musicbrainz Servers"}),(0,r.jsx)(n.p,{children:"Other, or additional, Musicbrainz Servers/Mirrors can be added to the API configuration. If more than one server is defined then multi-scrobbler will round-robin load balance API calls."}),(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"url"})," to define the base URL of the Musicbrainz server to use. If ",(0,r.jsx)(n.code,{children:"url"})," is not defined multi-scrobbler assumes it is the primary Musicbrainz server, ",(0,r.jsx)(n.code,{children:"https://musicbrainz.org"}),"."]}),(0,r.jsx)(n.p,{children:"Example of multiple servers:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  // ...\n  "transformers": [\n    {\n      "type": "musicbrainz",\n      "name": "MyMB",\n      "data": {\n        "apis": [\n          {\n            "contact": "contact@mydomain.com"\n            // uses default Musicbrainz server https://musicbrainz.org\n          },\n          // additional server\n          {\n            "contact": "contact@mydomain.com",\n            "url": "https://my.mb.mirror.domain.com"\n          }\n        ]\n      },\n    }\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"stage-configuration",children:"Stage Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["All of the properties found in ",(0,r.jsx)(n.a,{href:"#matching-with-musicbrainz",children:(0,r.jsx)(n.strong,{children:"Matching with Musicbrainz"})})," section are configured in ",(0,r.jsx)(n.a,{href:"/configuration/transforms#configuring-stages",children:"Stage Configuration"})," as ",(0,r.jsx)(n.code,{children:"defaults"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  // ...\n  "transformers": [\n    {\n      "type": "musicbrainz",\n      "name": "MyMB",\n      "data": {\n        "apis": [\n          {\n            "contact": "contact@mydomain.com"\n          }\n        ],\n        "defaults": {\n          "releaseStatusPriority": ["official"],\n          "fallbackArtistSearch": "native",\n          "releaseAllowEmpty": true\n        }\n      },\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"rules",children:"Rules"}),"\n",(0,r.jsxs)(n.p,{children:["Each ",(0,r.jsx)(n.a,{href:"/configuration/transforms#stage-rules",children:"Rule"})," should be either a boolean, specifying if the transformed data should be used for this field, or a ",(0,r.jsxs)(n.a,{href:"/configuration/transforms#conditional-moditication",children:[(0,r.jsx)(n.code,{children:"when"})," condition"]}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n    "type": "musicbrainz",\n    "name": "MyMB"\n    // ...\n    "title": false, // will not apply any changes to Play title\n    "artists": {\n      "when": {/* ... */}, // will only apply changes to Play artists if "when" is satisfied\n    /* ... */\n    },\n    "album": true // will always apply changes to Play album\n    "meta": true // adds MusicBrainz MBIDs to scrobble data\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"env-configuration",children:"ENV Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["The general configuration shown above can also be configured from a selection of ",(0,r.jsx)(n.em,{children:"presets"})," using ",(0,r.jsx)(n.a,{href:"/configuration?configType=env#configuration-types",children:"ENV Config"})," for individual Sources/Clients."]}),"\n",(0,r.jsxs)(n.p,{children:["You must ",(0,r.jsx)(n.strong,{children:"always"})," include the ",(0,r.jsx)(n.code,{children:"MB_CONTACT"})," ENV to ",(0,r.jsx)(n.a,{href:"#api-setup",children:"identify your application"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"MB_CONTACT=contact@mydomain.com\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To configure ",(0,r.jsx)(n.a,{href:"#stage-configuration",children:"stage defaults"})," use ",(0,r.jsx)(n.code,{children:"MB_PRESETS"})," with a comma-delimited list of presets you wish to apply. More than one preset can be applied, in which case they combine. You must choose at least one of the presets below:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," - Applies no defaults. This is the same as using no options from ",(0,r.jsx)(n.a,{href:"#matching-with-musicbrainz",children:"Matching With Musicbrainz"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sensible"})," - Applies the ",(0,r.jsx)(n.a,{href:"#sensible-default",children:"Sensible Default"})," configuration for sorting releases"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"native"})," - Applies ",(0,r.jsx)(n.code,{children:"fallbackArtistSearch: native"})," for ",(0,r.jsx)(n.a,{href:"#artist-extraction",children:"Artist Extraction"})," if the first search fails to find matches"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"aggressive"})," - Applies ",(0,r.jsx)(n.a,{href:"#free-text",children:"Free Text Search"})," ",(0,r.jsx)(n.code,{children:"fallbackFreeTextSearch: true"})," if all other searches fail"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Finally, use ENV ",(0,r.jsx)(n.code,{children:"*_TRANSFORMS=musicbrainz"})," on each Source/Client you wish to apply this stage to. This applies the stage in the ",(0,r.jsxs)(n.a,{href:"/configuration/transforms#lifecycle-hooks",children:[(0,r.jsx)(n.code,{children:"preTransform"})," Hook"]})," with all ",(0,r.jsx)(n.a,{href:"#rules",children:"Rules"})," enabled."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"*"})," stands for the prefix used for each Source/Client's ENV keys. Refer to the individual Source/Client Configuration sections to find this. Example:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["All ",(0,r.jsx)(n.a,{href:"http://localhost:3000/docs/configuration/sources/subsonic/",children:"Subsonic Source"})," ENVs look like ",(0,r.jsx)(n.code,{children:"SUBSONIC_USER=myuser"})," etc..."]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"SUBSONIC_TRANSFORMS=musicbrainz"})]}),"\n"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example Full Docker Deploy with ENV Configuration"}),(0,r.jsxs)(n.p,{children:["Using ",(0,r.jsx)(n.a,{href:"/quickstart#create-docker-compose-file",children:"Jellyfin + Maloja"})," example from Quickstart:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'services:\n  multi-scrobbler:\n    image: foxxmd/multi-scrobbler\n    container_name: multi-scrobbler\n    environment:\n      // highlight-start\n      - MB_CONTACT=contact@mydomain.com\n      - MB_PRESETS=sensible,native # creates sensible defaults with native fallback searching\n      // highlight-end\n      - JELLYFIN_URL=192.168.0.110:8096\n      - JELLYFIN_APIKEY=c9fae8756fbf481ebd9c5bb56b\n      - JELLYFIN_USER=MyUser\n      // highlight-start\n      - JELLYFIN_TRANSFORMS=musicbrainz # applies musicbrainz Stage to preTransform of Jellyfin source\n      // highlight-end\n\n      - MALOJA_URL=http://192.168.0.100:42010 # maloja receives enhanced scrobble from Jellyfin\n      - MALOJA_API_KEY=myApiKey\n\n\n    volumes:\n      - "./config:/config"\n    ports:\n      - "9078:9078"\n    restart: unless-stopped\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"matching-with-musicbrainz",children:"Matching with Musicbrainz"}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"All properties found in this section are optional."})}),(0,r.jsxs)(n.p,{children:["If you just want a sensible default for configuraion refer to the ",(0,r.jsx)(n.a,{href:"#best-practices",children:"Best Practices"})," section."]})]}),"\n",(0,r.jsx)(n.p,{children:"Matching your Scrobble's Play data with a result from Musicbrainz is comprised of two steps:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#searching",children:(0,r.jsx)(n.strong,{children:"Searching"})})," Musicbrainz using parts of your Scrobble as queries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#refining",children:(0,r.jsx)(n.strong,{children:"Refining"})})," matched results to select the desired/allowed match"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Both steps have separate configuration."}),"\n",(0,r.jsx)(n.h3,{id:"searching",children:"Searching"}),"\n",(0,r.jsx)(n.p,{children:"Before MS begins a search it checks Scrobble data it checks if your data already contains:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://musicbrainz.org/doc/MusicBrainz_Identifier",children:"MBIDs"})," for ",(0,r.jsx)(n.a,{href:"https://musicbrainz.org/doc/Artist",children:"artists"}),", ",(0,r.jsx)(n.a,{href:"https://musicbrainz.org/doc/Release",children:"album"}),", and specific ",(0,r.jsx)(n.a,{href:"https://musicbrainz.org/doc/Recording",children:"track/recording"})]}),"\n",(0,r.jsx)(n.li,{children:"and duration"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["If it already has all required data types then the entire Musicbrainz Stage ",(0,r.jsxs)(n.a,{href:"/configuration/transforms/#flow-control",children:["is ",(0,r.jsx)(n.strong,{children:"skipped"}),"."]})," If any are missing then a search is performed."]}),"\n",(0,r.jsx)(n.p,{children:"Define which data types are required using:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"searchWhenMissing"})," (defaults to all) - A list containing any of: ",(0,r.jsx)(n.code,{children:"artists"})," ",(0,r.jsx)(n.code,{children:"title"})," ",(0,r.jsx)(n.code,{children:"album"})," ",(0,r.jsx)(n.code,{children:"duration"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"forceSearch"})," (default ",(0,r.jsx)(n.code,{children:"false"}),") - Force searching even if all required data is present"]}),"\n"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/configuration/transforms#configuring-stages",children:"Stage Configuration"})," example:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:"// ...\n\"defaults\": {\n    // only search if MBIDs for artists or album is missing\n    \"searchWithMissing\": ['artists', 'album']\n\n    // uncomment to make the stage always search, even if above data is present\n    //forceSearch: true\n  }\n"})})]}),"\n",(0,r.jsxs)(n.p,{children:["If required data is missing then the next step is making ",(0,r.jsx)(n.a,{href:"https://musicbrainz.org/doc/MusicBrainz_API/Search",children:"search queries to the Musicbrainz database"})," to try to get potential candidates. Multi-scrobbler uses the ",(0,r.jsx)(n.strong,{children:"title, artist(s), and album"})," from your Scrobble data to query for matches."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["If your Scrobble data contains an ",(0,r.jsx)(n.a,{href:"https://musicbrainz.org/doc/ISRC",children:"ISRC"})," (usually from Spotify) then Multi-scrobbler will search using this ID first, before the above criteria. If no match is found with the ISRC then it automatically retries with the title, artist(s), and album."]})}),"\n",(0,r.jsxs)(n.p,{children:["Musicbrainz agressively normalizes these fields in its database which means that if your Scrobble data contains major innaccuracies or phrases fields in a non-normal way, it's possible Musicbrainz won't find any matches. This is a more common occurrence when trying to match Scrobble data from Sources that don't support multiple artist data, like ",(0,r.jsx)(n.a,{href:"/configuration/sources/subsonic",children:"Subsonic"})," and ",(0,r.jsx)(n.a,{href:"/configuration/sources/lastfm",children:"Last.fm"}),"."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Examples of Bad Data"}),(0,r.jsx)(n.p,{children:"Last.fm Scrobble returns an Artist in the title and combines two artists into one string:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "title": "Endless Possibility (feat. Wheatus)",\n    "artists": ["Bowling For Soup & Punk Rock Factory"]\n}\n'})}),(0,r.jsxs)(n.p,{children:["The corresponding ",(0,r.jsx)(n.a,{href:"https://musicbrainz.org/release/85bf284b-8b39-414e-8ad9-61f593072588",children:"Musicbrainz Recording"})," has all artists separated and no artist in the title:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "title": "Endless Possibility",\n    "artists": ["Bowling For Soup", "Punk Rock Factory", "Wheatus"]\n}\n'})})]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["If the initial search(es), and any ",(0,r.jsx)(n.a,{href:"#retrying-search",children:"retried searches"}),", do not return any results then the stage is marked as ",(0,r.jsxs)(n.a,{href:"/configuration/transforms/#flow-control",children:[(0,r.jsx)(n.strong,{children:"failed"})," (",(0,r.jsx)(n.code,{children:"onFailure"}),") for ",(0,r.jsx)(n.strong,{children:"Flow Control"})]}),"."]})}),"\n",(0,r.jsx)(n.h4,{id:"retrying-search",children:"Retrying Search"}),"\n",(0,r.jsx)(n.p,{children:"If normal searches using all the fields mentioned above does not return any matches Multi-scrobbler can try additional searches with modified queries."}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Album Only"}),(0,r.jsxs)(n.p,{children:["If your Scrobble data contains a title, artist(s), and an album (all three fields) then Multi-scrobbler can retry the search using only title and album, if ",(0,r.jsx)(n.code,{children:"fallbackAlbumSearch"})," is set in ",(0,r.jsx)(n.a,{href:"/configuration/transforms#configuring-stages",children:"Stage Configuration"}),":"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/configuration/transforms#configuring-stages",children:"Stage Configuration"})," example:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'// ...\n"defaults": {\n    // will try an additional search using only title + album name\n    "fallbackAlbumSearch": "true"\n  }\n'})})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Artist Extraction"}),(0,r.jsx)(n.p,{children:"If..."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#album-only",children:"Album Only"})," returns no results or did not run"]}),"\n",(0,r.jsxs)(n.li,{children:["Your scrobble data contains only ",(0,r.jsx)(n.strong,{children:"one"})," artist string"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fallbackArtistSearch"})," is set in ",(0,r.jsx)(n.a,{href:"/configuration/transforms#configuring-stages",children:"Stage Configuration"})]}),"\n"]}),(0,r.jsxs)(n.p,{children:["Then Multi-scrobbler will attempt to extract multiple artists from your artist and track string. ",(0,r.jsxs)(n.strong,{children:["This is not automatic. You must set ",(0,r.jsx)(n.code,{children:"fallbackArtistSearch"})," to enable this additional search."]})]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"fallbackArtistSearch"})," can be set to ",(0,r.jsx)(n.strong,{children:"Native"})," or ",(0,r.jsx)(n.strong,{children:"Naive"})," mode:"]}),(0,r.jsxs)(t.default,{groupId:"fallbackArtist",queryString:!0,children:[(0,r.jsxs)(l.default,{value:"native",label:"Native (Recommended)",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Native"})," (",(0,r.jsx)(n.code,{children:"native"}),") mode uses an aggressive configuration of the ",(0,r.jsx)(n.a,{href:"/configuration/transforms/native",children:"Native Stage"}),' to extract artists using common delimiters and common "joined" artist patterns from the artist and title string of your Scrobble data.']}),(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"If you already have a Native Stage configured you should use that instead, running it before the Musicbrainz stage."})}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Native Mode Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "title": "Endless Possibility (feat. Wheatus)",\n    "artists": ["Bowling For Soup & Punk Rock Factory, My Cool Band"]\n}\n'})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Extracts ",(0,r.jsx)(n.code,{children:"Bowling For Soup"})," ",(0,r.jsx)(n.code,{children:"Punk Rock Factory"})," ",(0,r.jsx)(n.code,{children:"My Cool Band"})," from artist string"]}),"\n",(0,r.jsxs)(n.li,{children:["Extracts ",(0,r.jsx)(n.code,{children:"Wheatus"})," from title string","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Removes ",(0,r.jsx)(n.code,{children:"(feat. Wheatus)"})," from title string because it found an artist there"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.p,{children:"Resulting data used for Musicbrainz search:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "title": "Endless Possibility",\n    "artists": ["Bowling For Soup", "Punk Rock Factory", "My Cool Band", "Wheatus"]\n}\n'})})]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/configuration/transforms#configuring-stages",children:"Stage Configuration"})," example:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'// ...\n"defaults": {\n    // ...\n    "fallbackArtistSearch": "native"\n  }\n'})})]}),(0,r.jsxs)(l.default,{value:"naive",label:"Naive",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Naive"})," (",(0,r.jsx)(n.code,{children:"naive"}),") mode looks for the first found common delimiter in the artist string. If it finds one then it uses the preceding value as the only artist in the Musicbrainz search. It does not try to extract additional artists from the artist string, or extract anything from the title string."]}),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Naive Mode Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "title": "Endless Possibility (feat. Wheatus)",\n    "artists": ["Bowling For Soup, Punk Rock Factory & Wheatus"]\n}\n'})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Finds ",(0,r.jsx)(n.code,{children:"&"}),' as first common delimiter, extracts "Bowling For Soup"']}),"\n"]}),(0,r.jsx)(n.p,{children:"Resulting data used for Musicbrainz search:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "title": "Endless Possibility (feat. Wheatus)",\n    "artists": ["Bowling For Soup"]\n}\n'})})]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/configuration/transforms#configuring-stages",children:"Stage Configuration"})," example:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'// ...\n"defaults": {\n    // ...\n    "fallbackArtistSearch": "naive"\n  }\n'})})]})]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Free Text"}),(0,r.jsxs)(n.p,{children:["If both ",(0,r.jsx)(n.a,{href:"#album-only",children:"Album Only"})," and ",(0,r.jsx)(n.a,{href:"#artist-extraction",children:"Artist Extraction"})," searches fail to return results, or were not run, you can additionally enable ",(0,r.jsx)(n.strong,{children:"Free Text"})," search. This will search Musicbrainz for ",(0,r.jsx)(n.strong,{children:"all"})," text of your Scrobble data artist/title/album, without constraint."]}),(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsxs)(n.p,{children:["Free text search is ",(0,r.jsx)(n.strong,{children:"unconstrained"})," which means that Musicbrainz will match text in ",(0,r.jsx)(n.strong,{children:"any"})," part of a Recording (artist, release, or recording field), regardless of where it is found. This may lead to results that are unexpected and undesired."]}),(0,r.jsxs)(n.p,{children:["If you know your Source's Play data is well organized you ",(0,r.jsx)(n.strong,{children:"should not"})," enable this. Free Text search should only be used if:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"your music is not well organized or"}),"\n",(0,r.jsxs)(n.li,{children:["there may be many alternative titles/artists for the music you listen to (such as with ",(0,r.jsx)(n.a,{href:"https://wiki.musicbrainz.org/Release#Status",children:"psuedo-releases"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["you can tolerate that matches may not be accurate for releases.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Generally, if you keep ",(0,r.jsx)(n.a,{href:"#score",children:"score"})," high then matched releases should ",(0,r.jsx)(n.em,{children:"at least"}),' be the right artist or what you would expect within a reason, as a match. The release may not be the one you actually listened to but it would be "close enough".']}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/configuration/transforms#configuring-stages",children:"Stage Configuration"})," example:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'// ...\n"defaults": {\n    // ...\n    "fallbackFreeTextSearch": true\n  }\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"refining",children:"Refining"}),"\n",(0,r.jsx)(n.h3,{id:"score",children:"Score"}),"\n",(0,r.jsxs)(n.p,{children:["Each match returned by MusicBrainz contains a numeric score representing how close it was to the search parameters. Set ",(0,r.jsx)(n.code,{children:"score"})," in configuration to set a minimum score that must be met by matches. Default is ",(0,r.jsx)(n.code,{children:"90"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  // ...\n  "score": 90 // matches must score 90 or higher to be considered\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"filtering",children:"Filtering"}),"\n",(0,r.jsxs)(n.p,{children:["There are several attributes associated with the ",(0,r.jsx)(n.a,{href:"https://wiki.musicbrainz.org/Release",children:"Release"})," a ",(0,r.jsx)(n.a,{href:"https://wiki.musicbrainz.org/Recording",children:"Recording"})," (individual Track/song) belongs to that you may be interested in controlling. MS can use these attributes to filter what the final Recording selected to match against your Play data is."]}),"\n",(0,r.jsx)(n.p,{children:"An easy way to think about this:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Do you prefer Albums, Singles, or EPs?"}),"\n",(0,r.jsx)(n.li,{children:"Do you always want to use an official album release, or are bootleg or cancelled albums okay to use?"}),"\n",(0,r.jsx)(n.li,{children:"Should a track that belongs to a Compilation album be allowed to match?"}),"\n",(0,r.jsx)(n.li,{children:"What country do you prefer an album release to be from?"}),"\n"]}),"\n",(0,r.jsx)(n.h5,{id:"release-attributes",children:"Release Attributes"}),"\n",(0,r.jsxs)(n.p,{children:["These attributes (",(0,r.jsx)(n.code,{children:"attribute_name"})," in config) are:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"https://wiki.musicbrainz.org/Release#Status",children:["Release ",(0,r.jsx)(n.strong,{children:"Status"})]})," (",(0,r.jsx)(n.code,{children:"releaseStatus"}),") - Is this release/album/ep official, promotional, bootleg, etc..."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"https://wiki.musicbrainz.org/Release_Group/Type#Primary_types",children:["Release Group ",(0,r.jsx)(n.strong,{children:"Primary Type"})]})," (",(0,r.jsx)(n.code,{children:"releaseGroupPrimaryType"}),") - Is this release an Album, Single, EP, etc..."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"https://wiki.musicbrainz.org/Release_Group/Type#Secondary_types",children:["Release Group ",(0,r.jsx)(n.strong,{children:"Secondary Type"})]})," (",(0,r.jsx)(n.code,{children:"releaseGroupSecondaryType"}),") - Is this release a compilation, soundtrack, remix, etc..."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"https://beta.musicbrainz.org/doc/Release/Country",children:["Release ",(0,r.jsx)(n.strong,{children:"Country"})]})," (",(0,r.jsx)(n.code,{children:"releaseCountry"}),") - What ISO2 country was this released in? US, GB, MX, etc...","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["MusicBrainz uses the special code ",(0,r.jsx)(n.code,{children:"XW"}),' to represent a "Worldwide" release AKA release not made specifically for a country']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Each of the above attributes can be used to ",(0,r.jsx)(n.strong,{children:"filter"})," matches using ",(0,r.jsx)(n.code,{children:"allow"})," (explicitly include) or ",(0,r.jsx)(n.code,{children:"deny"})," (exclude) terms. The correct property name for each is like so:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'[attribute_name]Allow = [...]\n[attribute_name]Deny\n\nEX to explicitly allow only release status "official"\n\n"releaseStatusAllow": ["official"]\n\nEX to exclude compilations\n\n"releaseGroupSecondaryTypeDeny": ["compilation"]\n'})}),"\n",(0,r.jsx)(n.h4,{id:"empty-releases",children:"Empty Releases"}),"\n",(0,r.jsx)(n.p,{children:"Sometimes a Recording may not have any associated Releases. This may be because there is not enough information about the Recording yet, or it was never included on an actual Release."}),"\n",(0,r.jsxs)(n.p,{children:["You may want to filter the majority of your matches by releases but allow matching a Recording that has no releases to begin with. To allow this set ",(0,r.jsx)(n.code,{children:"releaseAllowEmpty"})," to ",(0,r.jsx)(n.code,{children:"true"})," in configuration:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'// ...\n"defaults": {\n  // ...\n  "releaseAllowEmpty": true // don\'t remove a match during filtering just because it has no releases\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"sorting",children:"Sorting"}),"\n",(0,r.jsxs)(n.p,{children:["Each ",(0,r.jsx)(n.a,{href:"#release-attribute",children:"Release Attribute"})," has one additional property that can be used to ",(0,r.jsx)(n.strong,{children:"rank"})," releases based on the order of the values you give it. This is the ",(0,r.jsx)(n.code,{children:"priority"})," property."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"After"})," matches have been ",(0,r.jsx)(n.a,{href:"#filtering",children:"filtered"}),", the remaining matches will have their releases sorted. Release with an attribute that does not match are ",(0,r.jsx)(n.strong,{children:"not"})," removed, but they are sorted lower than releases that do match."]}),"\n",(0,r.jsxs)(n.p,{children:["Sorting can be a good alternative to filtering: with filters there is a possibility your filters may eliminate all matches; if you want to ensure that ",(0,r.jsx)(n.strong,{children:"some"})," match will be used then sorting can ensure that the ",(0,r.jsx)(n.strong,{children:"best choice"})," out of those given will always be used, without accidentally ending up with ",(0,r.jsx)(n.strong,{children:"no choice"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Sorting can be used instead of filters, or in conjunction with filters, it's your choice."}),"\n",(0,r.jsx)(n.p,{children:"In configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'[attribute_name]Priority = [...]\n\nEX to prefer "official" releases over everything else\n\n"releaseStatusPriority": ["official"]\n\nEX to prefer albums, then singles, over everything else\n\n"releaseGroupPrimaryTypePriority": ["album", "single"]\n'})}),"\n",(0,r.jsxs)(n.p,{children:["If a rule is not present then multi-scrobbler defaults it to ",(0,r.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"sensible-default",children:"Sensible Default"}),"\n",(0,r.jsxs)(n.p,{children:["Generally, the Musicbrainz Stage can be used without any of the ",(0,r.jsx)(n.a,{href:"#configuration",children:"optional configuration"})," and you should still see good results from matches. The top ",(0,r.jsx)(n.a,{href:"#score",children:"scored"})," match is, anecdotally, good enough for correcting and filling in surface-level play data like Title and Artist names."]}),"\n",(0,r.jsx)(n.p,{children:"For a more opinionated match that will mirror what you would expect from data from large music services:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n    // use official release over anything else\n    "releaseStatusPriority": ["official"],\n    // prefer album, then single, then ep\n    "releaseGroupPrimaryTypePriority": ["album", "single", "ep"],\n    // prefer worldwide release\n    "releaseCountryPriority": ["XW"]\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Consider adding ",(0,r.jsx)(n.a,{href:"./?fallbackArtist=native#artist-extraction",children:"Artist Extraction"})," in ",(0,r.jsx)(n.strong,{children:"Native Mode"})," if any of your Sources do not support multiple artists or your music collection is not tagged well."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n // add the line below to the sensible defaults above\n // (don\'t forget commas)\n "fallbackArtistSearch": "native"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"filter-considerations",children:"Filter Considerations"}),"\n",(0,r.jsx)(n.p,{children:"When using your own filters consider:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Prefer ",(0,r.jsx)(n.code,{children:"deny"})," over ",(0,r.jsx)(n.code,{children:"allow"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Releases come in all kinds of formats. Since ",(0,r.jsx)(n.code,{children:"allow"})," is explicit you may filter out your desired match without realizing it (correct data except for release type). Or the Musicbrainz data for a higher scored match may be appropriate but you did not include it, exhaustively."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Prefer ",(0,r.jsx)(n.a,{href:"#sorting",children:"Sorting"})," over ",(0,r.jsx)(n.a,{href:"#filtering",children:"Filtering"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Sorting does not eliminate any matches. It is, generally, better to get ",(0,r.jsx)(n.strong,{children:"some"})," match than it is to have your Play data completely uncorrected because filtering eliminated all matches"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"using-partial-match",children:"Using Partial Match"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.a,{href:"#rules",children:"Rules"})," to apply MusicBrainz match data selectively."]}),"\n",(0,r.jsxs)(n.p,{children:["If you know that your music collection is well organized and you do not want to change the artists/title/album etc... sent to a ",(0,r.jsx)(n.a,{href:"/configuration/clients",children:"Client"}),", you can still benefit from matches by only applying MBIDs using ",(0,r.jsx)(n.code,{children:"meta"})," so that any Client that supports Musicbrainz data (",(0,r.jsx)(n.a,{href:"/configuration/clients/koito",children:"Koito"}),", ",(0,r.jsx)(n.a,{href:"/configuration/clients/tealfm",children:"Tealfm"}),", ",(0,r.jsx)(n.a,{href:"/configuration/clients/listenbrainz",children:"Listenbrainz"}),", ",(0,r.jsx)(n.a,{href:"/configuration/clients/rocksky",children:"Rocksky"}),") can still get that data."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="subsonic.json"',children:'[\n  { \n    "name": "MySubsonic",\n    "data": { /* ... */},\n    "options": {\n      "playTransform": {\n        "preCompare": [\n          {\n            "type": "musicbrainz",\n            "name": "MyMB",\n            "title": false,\n            "artists": false,\n            "album": false,\n            "albumArtists": false,\n            "meta": true\n          }\n        ]\n      }\n    }\n  }\n]\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,r.jsx)(n.p,{children:"If"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Musicbrainz is not returning matches"}),"\n",(0,r.jsx)(n.li,{children:"Multi-scrobbler is using the wrong match"}),"\n",(0,r.jsx)(n.li,{children:"or the resulting enhanced Scrobble is not what you expected"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Enable logging by turning on ",(0,r.jsx)(n.a,{href:"/configuration#debug-mode",children:(0,r.jsx)(n.strong,{children:"Debug Mode"})})," to help diagnose any issues with the Musicbrainz API and Scrobble enhancement. ",(0,r.jsx)(n.strong,{children:"Before creating an issue"})," please enable logging and include any logs with your issue as this is needed to debug."]}),"\n",(0,r.jsxs)(n.p,{children:["If you have multiple Modification Stages and need to see the diff for your Play between each Stage, enable ",(0,r.jsx)(n.code,{children:'"log":  "all"'})," in the individual ",(0,r.jsx)(n.a,{href:"http://localhost:3000/docs/configuration/transforms/musicbrainz/?fallbackArtist=native#artist-extraction",children:"Modification Stage"}),"."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsxs)(n.p,{children:["In a ",(0,r.jsx)(n.a,{href:"/configuration/sources/subsonic",children:"Subsonic"})," ",(0,r.jsx)(n.a,{href:"/configuration?configType=file#configuration-types",children:"File Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="subsonic.json"',children:'[\n  { \n    "name": "MySubsonic",\n    "data": { /* ... */},\n    "options": {\n      "playTransform": {\n        // highlight-start\n        "log": "all",\n        // highlight-end\n        "preCompare": [\n          {\n            "type": "musicbrainz",\n            "name": "MyMB",\n          }\n        ]\n      }\n    }\n  }\n]\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"minimal",children:"Minimal"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsxs)(n.p,{children:["Your ",(0,r.jsx)(n.a,{href:"/configuration?configType=aio#configuration-types",children:"AIO Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  // ...\n  "transformers": [\n    {\n      "type": "musicbrainz",\n      "name": "MyMB",\n      "data": {\n        "apis": [\n          {\n            "contact": "contact@mydomain.com"\n          }\n        ]\n      },\n    }\n  ]\n}\n'})}),(0,r.jsxs)(n.p,{children:["In a ",(0,r.jsx)(n.a,{href:"/configuration/sources/subsonic",children:"Subsonic"})," ",(0,r.jsx)(n.a,{href:"/configuration?configType=file#configuration-types",children:"File Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="subsonic.json"',children:'[\n  { \n    "name": "MySubsonic",\n    "data": { /* ... */},\n    "options": {\n      "playTransform": {\n        "preCompare": [\n          {\n            "type": "musicbrainz",\n            "name": "MyMB"\n          }\n        ]\n      }\n    }\n  }\n]\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"sensible-default-1",children:"Sensible Default"}),"\n",(0,r.jsxs)(n.p,{children:["Using the config shown in ",(0,r.jsx)(n.a,{href:"#sensible-default",children:"Sensible Default"})," with File/AIO config, instead of ",(0,r.jsx)(n.a,{href:"#env-configuration",children:"ENV Config"}),"."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsxs)(n.p,{children:["Your ",(0,r.jsx)(n.a,{href:"/configuration?configType=aio#configuration-types",children:"AIO Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  // ...\n  "transformers": [\n    {\n      "type": "musicbrainz",\n      "name": "MyMB",\n      "data": {\n        "apis": [\n          {\n            "contact": "contact@mydomain.com"\n          }\n        ]\n      },\n      "defaults": {\n        "releaseStatusPriority": ["official"],\n        "releaseGroupPrimaryTypePriority": ["album", "single", "ep"],\n        "releaseCountryPriority": ["XW"],\n        "fallbackArtistSearch": "native"\n      }\n    }\n  ]\n}\n'})}),(0,r.jsxs)(n.p,{children:["In a ",(0,r.jsx)(n.a,{href:"/configuration/sources/subsonic",children:"Subsonic"})," ",(0,r.jsx)(n.a,{href:"/configuration?configType=file#configuration-types",children:"File Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="subsonic.json"',children:'[\n  { \n    "name": "MySubsonic",\n    "data": { /* ... */},\n    "options": {\n      "playTransform": {\n        "preCompare": [\n          {\n            "type": "musicbrainz",\n            "name": "MyMB"\n          }\n        ]\n      }\n    }\n  }\n]\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"add-metadata-only-no-scrobble-modification",children:"Add Metadata Only (No Scrobble Modification)"}),"\n",(0,r.jsxs)(n.p,{children:["If you do not want your scrobble data to be modified (artists/album/title) but still want to benefit from associating the scrobble with a Musicbrainz match (for Scrobble ",(0,r.jsx)(n.a,{href:"/configuration/clients",children:"Clients"})," like ",(0,r.jsx)(n.a,{href:"/configuration/clients/tealfm",children:"Tealfm"}),", ",(0,r.jsx)(n.a,{href:"/configuration/clients/rocksky",children:"Rocksky"}),", and ",(0,r.jsx)(n.a,{href:"/configuration/clients/koito",children:"Koito"}),"), then use ",(0,r.jsx)(n.a,{href:"#using-partial-match",children:"Partial Match"})," rules to specify only ",(0,r.jsx)(n.code,{children:"meta"})," to be updated."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsxs)(n.p,{children:["Your ",(0,r.jsx)(n.a,{href:"/configuration?configType=aio#configuration-types",children:"AIO Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  // ...\n  "transformers": [\n    {\n      "type": "musicbrainz",\n      "name": "MyMB",\n      "data": {\n        "apis": [\n          {\n            "contact": "contact@mydomain.com"\n          }\n        ]\n      },\n      "defaults": {\n        // maybe something like Sensible Default?\n      }\n    }\n  ]\n}\n'})}),(0,r.jsxs)(n.p,{children:["In a ",(0,r.jsx)(n.a,{href:"/configuration/clients/jellyfin",children:"Jellyfin"})," ",(0,r.jsx)(n.a,{href:"/configuration?configType=file#configuration-types",children:"File Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="jellyfin.json"',children:'[\n  { \n    "name": "MyJellyfin",\n    "data": { /* ... */},\n    "options": {\n      "playTransform": {\n        "preCompare": [\n          {\n            "type": "musicbrainz",\n            "name": "MyMB",\n            "title": false,\n            "artists": false,\n            "album": false,\n            "albumArtists": false,\n            "meta": true // only update scrobble metadata with MBIDs\n          }\n        ]\n      }\n    }\n  }\n]\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"use-native-stage-if-no-musicbrainz-matches",children:"Use Native Stage if no Musicbrainz Matches"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Musicbrainz Stage configured with","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#sensible-default",children:"Sensible Defaults"})}),"\n",(0,r.jsxs)(n.li,{children:["Fallback search with ",(0,r.jsx)(n.a,{href:"#retrying-search",children:"Artist Extraction"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/configuration/transforms/native/#default-stage",children:"Default Native Stage"})}),"\n",(0,r.jsxs)(n.li,{children:["Uses ",(0,r.jsx)(n.a,{href:"/configurations/transforms#flow-control",children:"Flow Control"})," to run Native only if there are no Musicbrainz matches"]}),"\n"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsxs)(n.p,{children:["Your ",(0,r.jsx)(n.a,{href:"/configuration?configType=aio#configuration-types",children:"AIO Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="config.json"',children:'{\n  // ...\n  "transformers": [\n    {\n      "type": "musicbrainz",\n      "name": "MyMB",\n      "data": {\n        "apis": [\n          {\n            "contact": "contact@mydomain.com"\n          }\n        ]\n      },\n      "defaults": {\n        "releaseStatusPriority": ["official"],\n        "releaseGroupPrimaryTypePriority": ["album", "single", "ep"],\n        "releaseCountryPriority": ["XW"],\n        "fallbackArtistSearch": "native",\n      }\n    }\n  ]\n}\n'})}),(0,r.jsxs)(n.p,{children:["In a ",(0,r.jsx)(n.a,{href:"/configuration/clients/jellyfin",children:"Jellyfin"})," ",(0,r.jsx)(n.a,{href:"/configuration?configType=file#configuration-types",children:"File Config"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",metastring:'title="jellyfin.json"',children:'[\n  { \n    "name": "MyJellyfin",\n    "data": { /* ... */},\n    "options": {\n      "playTransform": {\n        "preCompare": [\n          {\n            // if musicbrainz is successful then do NOT run native,\n            // only run native if musicbrainz fails to find a match (onFailure)\n            "type": "musicbrainz",\n            "name": "MyMB"\n            "onSuccess": "stop",\n            "onFailure": "continue"\n          },\n          {\n            "type": "native"\n          }\n        ]\n      }\n    }\n  }\n]\n'})})]})]})}function f(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);
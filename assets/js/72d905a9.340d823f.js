"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["1214"],{49415:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>h,default:()=>g,toc:()=>p,metadata:()=>s,assets:()=>m,contentTitle:()=>u});var s=JSON.parse('{"id":"configuration/sources/google-cast","title":"Google Cast (Chromecast)","description":"If your media device can be Cast to using this button Chromecast Icon on your phone/computer then multi-scrobbler can monitor it in order to scrobble music you play.","source":"@site/docs/configuration/sources/google-cast.mdx","sourceDirName":"configuration/sources","slug":"/configuration/sources/google-cast","permalink":"/multi-scrobbler/configuration/sources/google-cast","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/configuration/sources/google-cast.mdx","tags":[],"version":"current","frontMatter":{"title":"Google Cast (Chromecast)","toc_min_heading_level":2,"toc_max_heading_level":5},"sidebar":"tutorialSidebar","previous":{"title":"Deezer","permalink":"/multi-scrobbler/configuration/sources/deezer"},"next":{"title":"Icecast","permalink":"/multi-scrobbler/configuration/sources/icecast"}}'),t=i(85893),o=i(50065),a=i(703),r=i(73752),l=i(75752),c=i.n(l);let d='[\n  {\n    "name": "MyCast",\n    "data": {\n      "blacklistedDevices": [],\n      "whitelistedDevices": [],\n      "blacklistedApps": [],\n      "whitelistedApps": []\n    }\n  }\n]\n',h={title:"Google Cast (Chromecast)",toc_min_heading_level:2,toc_max_heading_level:5},u=void 0,m={},p=[{value:"Connecting Devices",id:"connecting-devices",level:4},{value:"mDNS Discovery",id:"mdns-discovery",level:6},{value:"What Media Does MS Scrobble?",id:"what-media-does-ms-scrobble",level:4},{value:"Allow Unknown Media Type",id:"allow-unknown-media-type",level:5},{value:"Forcing Media Tracking",id:"forcing-media-tracking",level:5},{value:"Cast Troubleshooting",id:"cast-troubleshooting",level:4},{value:"Configuration",id:"configuration",level:2}];function x(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h4:"h4",h5:"h5",h6:"h6",img:"img",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.a)(),...e.components},{AIOExample:i,Details:s,SchemaLink:l}=n;return i||j("AIOExample",!0),s||j("Details",!0),l||j("SchemaLink",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["If your media device can be ",(0,t.jsx)(n.strong,{children:"Cast"})," to using this button ",(0,t.jsx)(n.img,{src:"https://upload.wikimedia.org/wikipedia/commons/2/26/Chromecast_cast_button_icon.svg",alt:"Chromecast Icon"})," on your phone/computer then multi-scrobbler can monitor it in order to scrobble music you play."]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsxs)(n.p,{children:["Google Cast support is ",(0,t.jsx)(n.strong,{children:"experimental"}),". You may experience crashes and errors while using this Source. Please open an issue if you experience problems and include all information detailed in the issue template to help debug your issue."]})]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsxs)(n.p,{children:["This source relies on common, ",(0,t.jsx)(n.strong,{children:"basic"})," music data provided by the cast device which will always be less exhaustive than data parsed from full source integrations. If there is an existing ",(0,t.jsx)(n.a,{href:"/configuration/sources",children:"Source"})," it is recommended to configure for it and blacklist the app on Google Cast, rather than relying solely on Google Cast for scrobbling."]})]}),"\n",(0,t.jsx)(n.h4,{id:"connecting-devices",children:"Connecting Devices"}),"\n",(0,t.jsxs)(n.p,{children:["Cast devices can be manually configured using file-based configuration OR automatically discovered using ",(0,t.jsx)(n.strong,{children:"mDNS."})]}),"\n",(0,t.jsx)(n.h6,{id:"mdns-discovery",children:"mDNS Discovery"}),"\n",(0,t.jsxs)(n.p,{children:["The host machine running multi-scrobbler must be configured to allow ",(0,t.jsx)(n.a,{href:"https://book.hacktricks.xyz/network-services-pentesting/5353-udp-multicast-dns-mdns",children:"mDNS traffic on port 5353/UDP"}),"."]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"OS Specific Instructions"}),(0,t.jsxs)(a.default,{children:[(0,t.jsxs)(r.default,{value:"linux",label:"Linux",children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Docker"})}),(0,t.jsxs)(n.p,{children:["The host machine must have ",(0,t.jsx)(n.a,{href:"https://avahi.org/",children:"avahi-daemon"})," running to circumvent limitations with DNS resolution due to musl in Alpine. Most major linux distributions package avahi and many have it built-in. Once avahi is running you must pass D-Bus and the avahi daemon socket to your container like so:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker run ... -v /var/run/dbus:/var/run/dbus -v  	/var/run/avahi-daemon/socket:/var/run/avahi-daemon/socket ... foxxmd/multi-scrobbler\n"})}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Flatpak/Nodejs"})}),(0,t.jsx)(n.p,{children:"No additional steps are required."})]}),(0,t.jsxs)(r.default,{value:"windows",label:"Windows",children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Docker"})}),(0,t.jsx)(n.p,{children:"Unsupported at this time."}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Nodejs"})}),(0,t.jsx)(n.p,{children:"No additional steps are required."})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"what-media-does-ms-scrobble",children:"What Media Does MS Scrobble?"}),"\n",(0,t.jsxs)(n.p,{children:["Cast devices report what type of media the current activity is ",(0,t.jsxs)(n.a,{href:"https://developers.google.com/cast/docs/media/messages#MediaInformation",children:["(see ",(0,t.jsx)(n.code,{children:"metadata"})," property here)"]}),". The reported type is dependent on the application playing the media to correctly report it, the cast device does not magically know what the media is. If an application does not report a type it is always classified as ",(0,t.jsx)(n.code,{children:"unknown"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["By default, MS will only track media that is reported as ",(0,t.jsx)(n.code,{children:"MusicTrack"}),"."]})}),"\n",(0,t.jsx)(n.h5,{id:"allow-unknown-media-type",children:"Allow Unknown Media Type"}),"\n",(0,t.jsxs)(n.p,{children:["Media with an Unknown (",(0,t.jsx)(n.code,{children:"Generic"}),") media type can be explicitly allowed by setting ",(0,t.jsx)(n.code,{children:'"allowUnknownMedia": true'})," in the file-based configuration. This can also be configured to only allow unknown media types for specific applications by using a list of application names."]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json5",metastring:'title="chromecast.json"',children:'[\n  {\n    "name": "MyCast",\n    "type": "chromecast",\n    "data": {\n      // only allow unknown if app name contains any of these phrases\n      "allowUnknownMedia": ["smarttube", "default media receiver"]\n    },\n  }\n]\n'})})]}),"\n",(0,t.jsx)(n.h5,{id:"forcing-media-tracking",children:"Forcing Media Tracking"}),"\n",(0,t.jsxs)(n.p,{children:["MS can be forced to track media from an application regardless of media type. This is useful if an application incorrectly reports a media type you are sure should be music. Set ",(0,t.jsx)(n.code,{children:'"forceMediaRecognitionOn"'})," in the file-based configuration to a list of application names that should always be tracked."]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json5",metastring:'title="chromecast.json"',children:'[\n  {\n    "name": "MyCast",\n    "type": "chromecast",\n    "data": {\n      // media from applications that contains these phrases will always be tracked, regardless of media type reported\n      "forceMediaRecognitionOn": ["smarttube", "default media receiver"]\n    },\n  }\n]\n'})})]}),"\n",(0,t.jsx)(n.h4,{id:"cast-troubleshooting",children:"Cast Troubleshooting"}),"\n",(0,t.jsx)(n.p,{children:"Please include any/all logs with raw output if there are any errors encountered as this is critical to diagnosing issues."}),"\n",(0,t.jsxs)(n.p,{children:["To diagnose bad/incomplete track information or strange MS player behavior please turn on ",(0,t.jsx)(n.strong,{children:"payload logging"})," and include log output of the source running to help diagnose this issue. Either enable in config using the below example OR enable ",(0,t.jsx)(n.a,{href:"/configuration#debug-mode",children:"Debug Mode."})]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json5",metastring:'title="chromecast.json"',children:'[\n  {\n    "name": "MyCast",\n    "type": "chromecast",\n    "data": {\n      //...\n    },\n    "options": {\n      "logPayload": true\n    }\n  }\n]\n'})})]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(a.default,{groupId:"configType",queryString:!0,children:[(0,t.jsxs)(r.default,{value:"env",label:"ENV",children:[(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"#connecting-devices",children:"Manually configuring cast device connections"})," is only available through file-based config."]})}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Environmental Variable"}),(0,t.jsx)(n.th,{children:"Required?"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CC_ENABLE"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"Set to 'true' to enable Cast monitoring without needing to define other ENVs"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CC_WHITELIST_DEVICES"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"Only scrobble from these Cast devices. Comma-delimited list. EX mini-home, family-tv"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CC_BLACKLIST_DEVICES"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"Do not scrobble from these Cast devices. Comma-delimited list"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CC_WHITELIST_APPS"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"Only scrobble from these casted Apps. Comma-delimited list. EX spotify, pandora"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CC_BLACKLIST_APPS"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"Do not scrobble from these casted Apps. Comma-delimited list"})]})]})]})]}),(0,t.jsxs)(r.default,{value:"file",label:"File",children:[(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(c(),{title:"CONFIG_DIR/chromecast.json",language:"json5",children:d})]}),(0,t.jsxs)(n.p,{children:["or ",(0,t.jsx)(l,{lower:!0,objectName:"ChromecastSourceConfig"})]})]}),(0,t.jsxs)(r.default,{value:"aio",label:"AIO",children:[(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(i,{data:d,name:"chromecast"})]}),(0,t.jsxs)(n.p,{children:["or ",(0,t.jsx)(l,{lower:!0,objectName:"ChromecastSourceConfig"})]})]})]})]})}function g(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(x,{...e})}):x(e)}function j(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);